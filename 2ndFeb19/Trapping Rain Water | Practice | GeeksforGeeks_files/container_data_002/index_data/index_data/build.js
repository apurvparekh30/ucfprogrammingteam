!function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t){e.exports=adLoad},,,function(e,t,a){"use strict";(function(e){var t,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(1),o=(t=n)&&t.__esModule?t:{default:t};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(){d(this,e)}return i(e,null,[{key:"orientation",get:function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}},{key:"dimensions",get:function(){return{width:window.innerWidth,height:window.innerHeight}}}]),e}();f.pixelRatio=window.devicePixelRatio||"unknown",f.init=function(){var e=this;e.agentString=navigator.userAgent,e._getType(),e._getBrandAndOS(),e._getBrowser(),"desktop"!==e.type&&"windows"===e.os&&e.osVersion<=8&&"ie"===e.browser&&e.browserVersion<12&&(e.type="desktop");Array(70).join("-");for(var t in e)e.hasOwnProperty(t)&&"function"!=typeof e[t]&&e[t]},f._getType=function(){var e=this,t=/(android|mobile)/gi.exec(e.agentString),a=/(tablet|touch)/gi.exec(e.agentString),r=/(ipad)/gi.exec(e.agentString);e.type="desktop",t&&(e.type="mobile"),a&&(e.type="tablet"),r&&(e.type="tablet")},f._getBrandAndOS=function(){var e=this,t=e.agentString.match(/ip(hone|od|ad)|mac/gi);if(t){e.brand="apple",e.product=t[0].toLowerCase();var a=/(OS\s)(\X\s|)([\d\.\_]+)/gi.exec(e.agentString);return e.os=""==a[2]?"ios":"osx",void(e.osVersion=a[3].replace(/\_/g,"."))}var r=/(android)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(r)return e.brand=e.product=e.os=r[1].toLowerCase(),e._checkForSpecial("product",["pixel 2"],e.agentString.split("(")[1].split(")")[0]),void(e.osVersion=r[2]);var i=/(windows\snt\s|windows\sphone)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(i){switch(e.brand="microsoft",e.os="windows",i[2]){case"5.2":e.osVersion="xp";break;case"6.0":e.osVersion="vista";break;case"6.1":e.osVersion="7";break;case"6.2":e.osVersion="8";break;case"6.3":e.osVersion="8.1";break;case"10.0":e.osVersion="10";break;default:e.osVersion=i[2]}return e.product=i[1].toLowerCase(),void(e.product.match(/\snt/i)&&(e.product="pc"))}e.agentString.match(/(blackberry|bb10|playbook)/i)&&(e.brand=e.product=e.os="blackberry",e.osVersion=/(version)\/?\s*([0-9\.]+)/gi.exec(e.agentString)[2])},f._getBrowser=function(){var e=this,t=/(edge(?=\/))\/?\s*([0-9\.]+)/i.exec(e.agentString);if(t||(t=e.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*([0-9\.]+)/i)),!t||t.length<3){switch(e.os){case"ios":e.browser="safari";break;case"windows":e.browser="trident";break;default:e.browser="chrome"}e.browserVersion="os-default"}else switch(e.browser=t[1].toLowerCase(),e.browserVersion=t[2],e.browser){case"trident":(a=/\brv:+(\d+)/g.exec(e.agentString))&&(e.browserVersion=a[1]);case"msie":e.browser="ie";break;case"crios":e.browser="chrome";break;case"safari":(a=e.agentString.match(/\sversion\/([0-9\.]+)\s/i))&&(e.browserVersion=a[1]);break;case"chrome":var a;(a=e.agentString.match(/\b(OPR)\/([0-9\.]+)/i))&&(e.browser="opera",e.browserVersion=a[2])}},f._checkForSpecial=function(e,t,a){for(var r,i=0;i<t.length;i++)if(r=t[i].toLowerCase(),a.match(new RegExp(r,"i"))){this[e]=r;break}};var c=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};function h(e,t){switch(void 0===e?"undefined":r(e)){case"object":e=e||{r:0,g:0,b:0,a:1};break;default:if(e.indexOf("rgb")>=0)e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),e={r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),a:Number(e[3])};else{if(!(e.indexOf("#")>=0))return e;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);e=a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),a:a[4]?Number(a[4],16):1}:null}}return e.a||(e.a=1),t>=0&&(e.a=t),e}function u(e,t){return"rgba("+(e=h(e,t)).r+","+e.g+","+e.b+","+e.a+")"}function g(e){return e.from=e.from||e.color,e.from&&"object"!==r(e.from)&&(e.from=h(e.from)),e.to&&"object"!==r(e.to)&&(e.to=h(e.to)),e.amount=void 0===e.amount?1:e.amount,e}function m(e){var t=e.h/60,a=e.s,r=e.l,i=(1-Math.abs(2*r-1))*a,n=i*(1-Math.abs(t%2-1)),o=r-i/2,s=void 0,l=void 0,d=void 0;switch(t=Math.floor(t)){case 0:s=i,l=n,d=0;break;case 1:s=n,l=i,d=0;break;case 2:s=0,l=i,d=n;break;case 3:s=0,l=n,d=i;break;case 4:s=n,l=0,d=i;break;case 5:s=i,l=0,d=n}return{r:p(s,o),g:p(l,o),b:p(d,o)}}function p(e,t){return(e=Math.floor(255*(e+t)))<0&&(e=0),e}c.prototype={clear:function(){this.data=new Float32Array(this.identity)},rotate:function(e){var t=this,a=new Float32Array(t.identity),r=Math.cos(e).toFixed(15),i=Math.sin(e).toFixed(15);return a[0]=r,a[1]=i,a[3]=-i,a[4]=r,t.multiply(a,!1),t},scale:function(e,t){var a=this,r=new Float32Array(a.identity);return r[0]=e,r[4]=t,a.multiply(r,!1),a},skew:function(e,t){var a=this,r=new Float32Array(a.identity);return r[1]=Math.tan(e),r[3]=Math.tan(t),a.multiply(r),a},translate:function(e,t){var a=this,r=new Float32Array(a.identity);return r[2]=e||0,r[5]=t||0,a.multiply(r,!0),a},multiply:function(e,t){for(var a=this,r=new Float32Array(a.data),i=t?e:r,n=t?r:e,o=0;o<6;o++){var s=3*Math.floor(o/3),l=o%3;a.data[o]=i[s]*n[l]+i[s+1]*n[l+3]}a.data[2]+=i[2],a.data[5]+=i[5]},setFromCss:function(e){var t=e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return"matrix("+e.data[0]+","+e.data[1]+","+e.data[3]+","+e.data[4]+","+e.data[2]+","+e.data[5]+")"}};var _=Object.freeze({toRgba:h,toRgbaString:u,hue:function(e){var t,a,r,i,n,o,s,l,d=(a=(t=(e=g(e)).from).r/255,r=t.g/255,i=t.b/255,l=((n=Math.max(a,r,i))+(o=Math.min(a,r,i)))/2,{h:0==(s=n-o)?0:n==a?(r-i)/s%6*60:n==r?60*((i-a)/s+2):60*((a-r)/s+4),s:s?s/(1-Math.abs(2*l-1)):0,l:l});d.h=(d.h+e.amount)%360,d.h<0&&(d.h+=360);var f=m(d);return e.from.a>=0&&(f.a=e.from.a),"object"===e.format?f:u(f)},saturation:function(e){delete e.to,e=g(e);var t={};for(var a in e.from){var r=parseInt(e.from[a]);if("a"===a)t[a]=r;else{if("r"===a){var i=0,n=255;for(var o in e.from)parseInt(e.from[o])>i&&(i=parseInt(e.from[o])),parseInt(e.from[o])<n&&(n=parseInt(e.from[o]))}t[a]=Math.round(r*e.amount+(1-e.amount)*((i+n)/2))}}return"object"===e.format?t:u(t)},contrast:function(e){delete e.to,e=g(e);var t={};for(var a in e.from){var r=parseInt(e.from[a]);t[a]="a"===a?r:Math.round(r*e.amount)}return"object"===e.format?t:u(t)},tint:function(e){e=g(e);var t={};for(var a in e.from){var r=parseInt(e.from[a]);t[a]="a"===a?r:Math.round(r+(parseInt(e.to[a])-r)*e.amount)}return"object"===e.format?t:u(t)},transform:function(e){e=g(e);var t={};for(var a in e.from){var r=parseInt(e.from[a]);t[a]="a"===a?r:Math.round(r-(255-parseInt(e.to[a]))*e.amount)}return"object"===e.format?t:u(t)},invert:function(e){delete e.to,delete e.amount,e=g(e);var t={};for(var a in e.from){var r=parseInt(e.from[a]);t[a]="a"===a?r:255-r}return"object"===e.format?t:u(t)}});function v(e){return Math.PI/180*e}function y(e){return 180/Math.PI*e}function w(e,t,a,r,i){return(i-a)/(r-a)*(t-e)+e}function x(e){if("[object Object]"!==Object.prototype.toString.call(e))return e;var t=e.constructor();for(var a in e)t[a]=x(e[a]);return t}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=arguments[2],r=x(e);for(var i in t){var n=t[i];void 0===r[i]?r[i]=t[i]:a&&"[object Object]"===Object.prototype.toString.call(n)&&(r[i]=b(r[i],n,a))}return r}var D=function e(){d(this,e)};D.debug_level1=!1,D.debug_level2=!1,D.filter=void 0,D.debug_element=void 0,D.debug_css_list=void 0,D.init=function(){this.generateBrowserKeyDictionary()},D.setDebugLevel=function(e){var t=this;switch(parseInt(e)){case 1:t.debug_level1=!0,t.debug_level2=!1;break;case 2:t.debug_level1=!0,t.debug_level2=!0;break;default:t.debug_level1=!1,t.debug_level2=!1}},D.setDebugFilter=function(e){this.filter=e,this.debug_level1=!0},D.ifDebug=function(e){var t=this;return t.filter?!(!t.passDebugFilter()||!t[e])||void 0:t[e]},D.passDebugFilter=function(){var e=this;if(e.debug_element&&e.debug_element.id.indexOf(e.filter)>-1)return!0;if(e.debug_css_list)for(var t in e.debug_css_list){if(t.indexOf(e.filter)>-1)return!0;if(String(e.debug_css_list[t]).indexOf(e.filter)>-1)return!0}return!1},D.generateBrowserKeyDictionary=function(){var e=this;e.deviceKeyDict={};var t=document.createElement("div").style;for(var a in t){var r=e.getPrefix(a),i=e.standardizeKey(a);switch(f.browser){case"safari":"webkit"==r?e.deviceKeyDict[i]=e.prependPrefix("webkit",i):e.prependPrefix("webkit",i)in t||(e.deviceKeyDict[i]=i);break;case"firefox":var n=e.prependPrefix("Moz",i),o=e.prependPrefix("Webkit",i);i in t?e.deviceKeyDict[i]=i:"moz"==r?e.camelateKey("webkit-"+i)in t&&(e.deviceKeyDict[i]=n):"webkit"==r&&(n in t||(e.deviceKeyDict[i]=o));break;case"chrome":case"ie":default:i in t?e.deviceKeyDict[i]=i:r&&(e.deviceKeyDict[i]=e.prependPrefix(r,i))}}},D.apply=function(e,t){var a=this;a.debug_element=e,a.debug_css_list=t,a.ifDebug("debug_level1");var r={};for(var i in t)i.match(/^transform\(/)?r[i]=t[i]:(a.ifDebug("debug_level1"),e.style[a.getDeviceKey(i)]=t[i]);a.applyTransforms(e,r),a.ifDebug("debug_level1"),a.debug_element=null,a.debug_css_list=null},D.conformCssObject=function(e,t){var a=this;a.debug_element=t,a.ifDebug("debug_level1");var r={};if(e)for(var i in e){a.ifDebug("debug_level2");var n=a.conformKeyValue(i,e[i]);for(var o in n)a.ifDebug("debug_level2"),r[n[o][0]]=n[o][1]}return a.debug_element=null,r},D.conformCssString=function(e,t){var a=this;a.debug_element=t,a.ifDebug("debug_level1");var r={};if(e){var i=e.split(/\s*;\s*/);for(var n in i)if(i[n]){var o=i[n].split(/:(.+)?/);a.ifDebug("debug_level2");var s=a.conformKeyValue(o[0],o[1]);for(var l in s)a.ifDebug("debug_level2"),r[s[l][0]]=s[l][1]}}return a.debug_element=null,r},D.conformCssKeyValue=function(e,t){this.ifDebug("debug_level1");var a={};return a[e]=t,this.conformCssObject(a)},D.applyTransforms=function(e,t){var a=this;a.ifDebug("debug_level1");var r=new c,i=e.style[a.getDeviceKey("transform")].match(/matrix[^\)]+\)/);if(i&&(r.setFromCss(i[0]),a.ifDebug("debug_level2")),"transforms"in e)var n=e.transforms;else n={tx:0,ty:0,rz:0,sx:1,sy:1};var o={};for(var s in t)o[s.match(/\(\s([^\s]+)/)[1]]=t[s];if(void 0!=o.tx&&(r.data[2]=0),void 0!=o.ty&&(r.data[5]=0),void 0!=o.rz){var l=-n.rz;r.rotate(l*(Math.PI/180)),r.rotate(o.rz*(Math.PI/180)),n.rz=o.rz}void 0!=o.sx&&(l=1/n.sx,r.scale(l,1),r.scale(o.sx,1),n.sx=o.sx),void 0!=o.sy&&(l=1/n.sy,r.scale(1,l),r.scale(1,o.sy),n.sy=o.sy),void 0!=o.tx&&(r.translate(o.tx,0),n.tx=o.tx),void 0!=o.ty&&(r.translate(0,o.ty),n.ty=o.ty),e.transforms=n,a.ifDebug("debug_level2"),e.style[a.getDeviceKey("transform")]=r.getCss()},D.conformKeyValue=function(e,t){e=String(e).trim(),t=String(t).trim();var a=this.standardizeKey(e);return this.conformValue(a,t)},D.hasPrefix=function(e){return e.search(this.matchPrefixRegex())>-1},D.getPrefix=function(e){var t=e.match(this.matchPrefixRegex());return t?t[1].replace(/-/g,"").toLowerCase():null},D.stripPrefix=function(e){var t=e.replace(this.matchPrefixRegex(),"");return t.charAt(0).toLowerCase()+t.slice(1)},D.getDeviceKey=function(e){return e in this.deviceKeyDict?this.deviceKeyDict[e]:e},D.prependPrefix=function(e,t){return e+t.replace(/^(.)/,function(e){return e.charAt(0).toUpperCase()})},D.standardizeKey=function(e){var t=this;return e=(e=t.stripPrefix(e))in t.keyFormatExceptions()?t.keyFormatExceptions()[e]:t.camelateKey(e),t.ifDebug("debug_level2"),e},D.camelateKey=function(e){return e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})},D.keyFormatExceptions=function(){return{x:"transform( tx )",translateX:"transform( tx )",y:"transform( ty )",translateY:"transform( ty )",rotate:"transform( rz )",rotation:"transform( rz )",scaleX:"transform( sx )",scaleY:"transform( sy )",scale:"transform( sx ),transform( sy )"}},D.conformValue=function(e,t){var a,r=this,i=[],n=t.match(/\s/),o=t.match(r.matchNumberRegex());if(!n&&o){r.ifDebug("debug_level2"),a=Number(o[0]);var s=t.match(/[^0-9\.]+$/);if(s)a+=s[0];else switch(e){case"top":case"right":case"bottom":case"left":case"width":case"height":case"fontSize":case"lineHeight":case"padding":case"margin":case"marginRight":case"marginLeft":case"marginTop":case"marginBottom":case"borderRadius":case"borderWidth":case"letterSpacing":a+="px"}}else if("backgroundImage"==e)r.ifDebug("debug_level2"),a='url( "'+(t=t.replace(/^url\(\s*['"]*/,"").replace(/['"]*\s*\)$/,""))+'" )';else if("transform"==e){r.ifDebug("debug_level2");for(var l=/([a-z0-9]+)\(([^\)]+)\)/gi;params=l.exec(t);){var d=params[2].replace(/\s/g,"").split(",").map(function(e,t,a){return Number(e.match(r.matchNumberRegex())[0])});switch(params[1]){case"translate":i.push(["transform( tx )",d[0]]),i.push(["transform( ty )",d[1]]);break;case"translateX":i.push(["transform( tx )",d[0]]);break;case"translateY":i.push(["transform( ty )",d[0]]);break;case"rotate":i.push(["transform( rz )",d[0]]);break;case"scale":i.push(["transform( sx )",d[0]]),i.push(["transform( sy )",d[1]]);break;case"scaleX":i.push(["transform( sx )",d[0]]);break;case"scaleY":i.push(["transform( sy )",d[0]])}}}else r.ifDebug("debug_level2"),a=t;if(void 0!=a){r.ifDebug("debug_level2");for(var f=e.split(/\,/),c=0;c<f.length;c++)i.push([f[c],a])}return i},D.matchNumberRegex=function(){return/^[+-]?[0-9]*\.?[0-9]+/},D.matchPrefixRegex=function(){return/^-*(moz-*|webkit-*|ms-*|o-)/i};var k=[],S=[],T=[],C=[],A=void 0,P={},O=!1,F=0,E=function(){},L=function(){};function z(e,t){var a=n.LoaderUtils.getFileName(e);return I(a,!0)||(t&&1==t.forCanvas?S.push(e):k.push(e)),a}function M(e){if(P[e])return P[e];throw new Error("ImageManager : No image named '"+e+"' has been loaded")}function I(e,t){return void 0!=P[e]}function X(t,a){if(L=a||e.failAd,O)C.push(t);else{A=new o.default({name:"imageManagerLoader",onComplete:function(e){O=!1,B(e.getAllContentRaw())},onFail:function(e){O=!1,L.call()}}),E=[].concat(t),C=[];var r=k.slice();k=[],A.add(new o.default(r,{name:"dynamicImages-"+F++,fileType:"jpg"}));var i=S.slice();S=[],A.add(new o.default(i,{name:"dynamicCanvasImages-"+F++,fileType:"jpg",crossOrigin:"anonymous"}));var n=T.slice();T=[];for(var s=0;s<n.length;s++)A.add(n[s]);O=!0,A.load()}}function B(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var a=e[t];I(e[t].id)||(P[a.id]=a)}for(t=0;t<E.length;t++)E[t].call();C.length>0&&X(C)}function Y(e){return new Promise(function(t,a){var r;f.init(),D.init(),(r=e)&&B(r.getAllContentRaw()),Promise.all([]).then(function(){t()}).catch(function(e){a(e)})})}function j(e,t){if("string"!=typeof e)return e;switch(t=t||document,(e=e.trim())[0]){case"#":return t.getElementById(e.slice(1));case".":return t.getElementsByClassName(e.slice(1));case"<":return t.getElementsByTagName(e.slice(1,e.length-1));default:return t.getElementById(e)}}function N(e,t){e=j(e);var a={};if(arguments.length>2)for(var r=1;r<arguments.length;r+=2)a=D.conformCssKeyValue(arguments[r],arguments[r+1]);else a="string"==typeof arguments[1]?D.conformCssString(arguments[1],e):D.conformCssObject(arguments[1],e);D.apply(e,a)}function R(e,t){var a;if(e=j(e),"x"==t||"y"==t){var r=e.style[D.getDeviceKey("transform")].replace(/[\s\(\)matrix]/g,"").split(",");a=r.length<6?0:+r["x"==t?4:5]}else a=window.getComputedStyle(e,null).getPropertyValue(t).replace(/px/,""),isNaN(a)||(a=parseInt(a,10));return a}function W(e,t){if(!document.getElementById(e)){var a=document.createElement("style");a.type="text/css",a.id=e;var r=2===arguments.length?t:"";if(arguments.length>2)for(var i=0;i<arguments.length-1;i+=2)r+=arguments[i+1].replace(/\,\s+/g,","),r+=" { "+(arguments[i+2]||"")+" }\n";a.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(a)}}function H(e,t){for(var a=j(e),r=0;r<arguments.length-1;r++)a.classList.add(arguments[r+1])}var V=Object.freeze({setCss:N,getCss:R,injectStylesheet:W,addClass:H,removeClass:function(e,t){j(e).classList.remove(t)}}),q={x:["offsetWidth","width","left","right"],y:["offsetHeight","height","top","bottom"]},U="clampXY";function K(e,t,a,r){var i=j(e);r=!1!==r;var n=i.childNodes,o=[],s={};/(x)/gi.exec(t)&&(s.x={}),/(y)/gi.exec(t)&&(s.y={});for(var l=0;l<n.length;l++){var d=n[l];for(var f in o[l]={},s){var c=R(d,f),h=c+d[q[f][0]],u=s[f];0==l&&(u.min=c,u.max=h),c<u.min&&(u.min=c),u.max<h&&(u.max=h),o[l][f]=c}}var g={top:0,bottom:0,left:0,right:0};if(a)for(var m in g)g[m]=isNaN(a)?a[m]||0:a;var p={};for(var f in s){var _=s[f];r&&(p[f]=_.min+R(i,f)-g[q[f][2]]),p[q[f][1]]=_.max-_.min+g[q[f][2]]+g[q[f][3]]}for(N(i,p),l=0;l<n.length;l++){for(var f in d=n[l],p={},s)p[f]=o[l][f]-s[f].min+g[q[f][2]];N(d,p)}}var G=[{x:"offsetWidth",y:"offsetHeight",parent:"parentNode"},{x:"width",y:"height",parent:"stage"}],$="alignBottom",J="alignCenter",Z="alignLeft",Q="alignRight",ee="alignTop";function te(e,t){var a=e.canvas||j(e),r={},i=!1!==t.snap,n=ie(e)?0:1;"string"==typeof t&&(t=re(t));var o=t.against;if(t.type){var s=re(t.type);for(var l in s)t.hasOwnProperty(l)||(t[l]=s[l])}for(var d in t)if("x"==d||"y"==d){var f=t[d];if(!f)continue;"string"==typeof f&&(f={type:f});var c=void 0,h=void 0,u=0,g=!1,m=f.offset||t.offset||0;if(f.outer=f.outer||t.outer,void 0!==f.against||void 0!==o){var p=0;ie(c=f.against||o)?c.canvas?p=1:u=R(c,d):"number"==typeof c?(g=!0,u=c):(u=c[d],p=1),h=G[p][d],f.type===J&&(f.outer=!1)}else c=a[G[n].parent],h=G[n][d];var _=a[G[n][d]];switch(e._type){case"arc":case"path":parrams.type==J?_=0:m+=_/2;break;case"text":if("x"===d)switch(e.alignText){case"center":_=0;case"right":_*=-1}}var v=re(f.type,_,g?0:c[h],!g&&!!f.outer);null!=v&&(v+=u+m,r[d]=i?Math.round(v):v)}return r}function ae(e,t){var a=Array.isArray(e)?e:[e],r=void 0,i=a,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var l=s,d=te(l,t);if(ie(l))N(l.canvas||j(l),d);else for(var f in d)l[f]=d[f];void 0==r&&(r=d)}if(1==a.length)return r}function re(e,t,a,r){var i=1==arguments.length;switch(e){case"alignBottom":if(r&&(t=0),!i)return a-t;case"alignTop":return i?{y:e}:r?-t:0;case"alignRight":if(r&&(a+=t),!i)return a-t;case"alignLeft":return i?{x:e}:r?-t:0;case"alignCenter":return r&&(a=0),i?{x:e,y:e}:(a-t)/2;default:return null}}function ie(e){return e instanceof HTMLElement||void 0!=e.canvas}for(var ne,oe,se={},le=!1,de=function(e,t,a,r,i,n,o,s,l,d,f){var c=new CustomEvent(e);return c.mouse={global:{x:t,y:a},local:{x:r,y:i}},c.element={x:n||0,y:o||0},c.distance={x:s||0,y:l||0},c.velocity={x:d||0,y:f||0},c.direction={x:d>0?"right":d<0?"left":null,y:f>0?"down":f<0?"up":null},c},fe=function(e){e&&(e.stopImmediatePropagation(),se[e.type]=!0)},ce=function(e){return void 0!=se[e]},he=function(){function e(t){d(this,e);var a=this;a.elem=t,a.hasActiveChildren=!0,a.debug=!1,a.eventList=[],a._isDragEnabled=!1,a._isDragging=!1,a._give=2,a._oX=0,a._oY=0,a._p1X=0,a._p1Y=0,a._p2X=0,a._p2Y=0,a._sX=0,a._sY=0,a._vX=0,a._vY=0,a._cursor="mouse",a._start="down",a._end="up",a.init()}return e.prototype.init=function(){var e=this;e.debug,e._handleTouchStart=e._handleTouchStart.bind(e),e._handleDown=e._handleDown.bind(e),e._handleDrag=e._handleDrag.bind(e),e._handleUp=e._handleUp.bind(e),e._elemAdd=e.elem.addEventListener.bind(e.elem),e._elemRemove=e.elem.removeEventListener.bind(e.elem),e._reset()},e.prototype.register=function(e,t){var a=this;a.debug,a.eventList.push(e),a._checkDragEnabled(),a._elemAdd(e,t)},e.prototype.unregister=function(e,t){var a=this;a.debug;var r=a.eventList.indexOf(e);r>=0&&a.eventList.splice(r,1),a._checkDragEnabled(),a._elemRemove(e,t)},e.prototype._reset=function(){var e=this;e._cursor="mouse",e._start="down",e._end="up",e.elem.addEventListener("touchstart",e._handleTouchStart),"ios"!=f.os&&e.elem.addEventListener("mousedown",e._handleDown)},e.prototype._checkDragEnabled=function(){var e=this.eventList.join("").indexOf("onDrag");this._isDragEnabled=e>-1},e.prototype._getEventScope=function(e){return e.changedTouches?e.changedTouches[0]:e},e.prototype._add=function(e,t){window.addEventListener(this._cursor+e,t)},e.prototype._remove=function(e,t){window.removeEventListener(this._cursor+e,t)},e.prototype._handleDown=function(e){var t=this;t.debug,le||(le=!0,se={}),t.elem.removeEventListener("touchstart",t._handleTouchStart),"ios"!=f.os&&t.elem.removeEventListener("mousedown",t._handleDown),t._isDragging=!1,t._add(t._end,t._handleUp),t._add("move",t._handleDrag);var a=t._getEventScope(e),r=a.pageX,i=a.pageY,n=t.elem.getBoundingClientRect(),o=r-n.left,s=i-n.top,l=t.elem.x||R(t.elem,"x"),d=t.elem.y||R(t.elem,"y"),c=n.left-l,h=n.top-d;t._oX=c+o,t._oY=h+s;var u=r-t._oX,g=i-t._oY;t._sX=t._p1X=t._p2X=r,t._sY=t._p1Y=t._p2Y=i,function(e){if(!ce(e)){var a=new de(e,r,i,o,s,u,g);t.debug,t.elem.dispatchEvent(a)}}("onPress")},e.prototype._handleUp=function(e,t){var a=this;a.debug,a._remove(a._end,a._handleUp),a._remove("move",a._handleDrag);var r=a._getEventScope(e),i=r.pageX,n=r.pageY,o=a.elem.getBoundingClientRect(),s=i-o.left,l=n-o.top,d=i-a._oX,f=n-a._oY;!0!==t&&m("onRelease");var c=o.top+window.pageYOffset,h=c+o.height,u=o.left+window.pageXOffset,g=u+o.width;function m(e){if(!ce(e)){var t=new de(e,i,n,s,l,d,f,0,0,a._vX,a._vY);a.debug,a.elem.dispatchEvent(t)}}a._isDragging?a._isDragEnabled&&a._dragEndOrSwipe("onDragStop"):i>u&&i<g&&n>c&&n<h&&m("onSelect"),a._isDragging&&a._dragEndOrSwipe("onSwipe"),a._reset(),e.preventDefault(),le=!1},e.prototype._handleTouchStart=function(e){var t=this;t.debug,t._cursor="touch",t._start="start",t._end="end",t._handleDown(e)},e.prototype._handleDrag=function(e){var t=this;t.debug;var a=t._getEventScope(e),r=a.pageX,i=a.pageY,n=r-t._p1X,o=r-t._p2X;t._vX=(o-n)/2+n;var s=i-t._p1Y,l=i-t._p2Y;t._vY=(l-s)/2+s;var d=r-t._oX,f=i-t._oY,c=t.elem.getBoundingClientRect(),h=r-c.left,u=i-c.top;function g(e){if(!ce(e)){var a=new de(e,r,i,h,u,d,f,t._p1X-t._sX,t._p1Y-t._sY,t._vX,t._vY);t.debug,t.elem.dispatchEvent(a)}}t._isDragging?t._isDragEnabled&&g("onDrag"):(Math.abs(t._sX-r)>t._give||Math.abs(t._sY-i)>t._give)&&(t._isDragging=!0,t._isDragEnabled&&g("onDragStart")),t._p2X=t._p1X,t._p1X=r,t._p2Y=t._p1Y,t._p1Y=i},e.prototype._dragEndOrSwipe=function(e){var t=this;if(t.debug,!ce(name)){var a=t.elem.getBoundingClientRect(),r=new de(e,t._p1X,t._p1Y,t._p1X-a.left,t._p1Y-a.top,t._p1X-t._oX,t._p1Y-t._oY,t._p2X-t._sX,t._p2Y-t._sY,t._vX,t._vY);t.debug,t.elem.dispatchEvent(r)}},e}(),ue=new function(){var e=this,t=[],a=[],r=void 0!=document.createEventObject;function i(e){for(var a=null,r=0;r<t.length;r++)if(t[r].elem===e){a=t[r];break}return a||(a=n(e)),a}function n(e){var a=new he(e);return t.push(a),a}function o(t,a){var r=i(t);if(r.hasActiveChildren!=a){r.hasActiveChildren=a;for(var n=r.elem.getElementsByTagName("*"),o=0;o<n.length;o++)n[o].parentNode==t&&(a?e.enable(n[o]):e.disable(n[o]))}}function s(e,t,r,i){e.style.visibility="hidden",i.push(e);for(var n=document.elementFromPoint(t,r),o=0;o<a.length;o++)if(a[o].elem==n)return s(n,t,r,i);return n}function l(e){for(var t=[],a=s(e.target,e.clientX,e.clientY,t),r=0;r<t.length;r++)t[r].style.visibility="visible";return t=[],e.stopImmediatePropagation(),a}function d(e){var t=l(e),a=document.createEvent("HTMLEvents");a.initEvent(e.type,!0,!1),t.dispatchEvent(a)}e._kills={},e.add=e.addEventListener=function(e,t,a){i(e).register(t,a),N(e,"cursor","pointer"),N(e,"pointer-events","auto")},e.remove=e.removeEventListener=function(e,t,a){var r=i(e);r&&(r.unregister(t,a),r.eventList.length<=0&&N(e,"cursor","auto"))},e.disable=function(e){var t=i(e);a.push(t),r?(t.register(GestureEvent.CLICK,d),N(e,"cursor","auto")):N(e,"pointer-events","none")},e.disableChildren=function(e){o(e,!1)},e.enable=function(e){for(var t=i(e),n=0;n<a.length;n++)if(t==a[n]){r?t.unregister(GestureEvent.CLICK,d):(N(e,"pointer-events","auto"),N(e,"cursor","pointer"));break}},e.enableChildren=function(e){o(e,!0)}},ge={ENABLED:"uiComponentEnabled",RESIZE:"uiResize",SLIDER_UPDATE:"uiSliderUpdate",get componentEnabled(){return ne||(ne=new CustomEvent("uiComponentEnabled")),ne},get sliderUpdate(){return oe||(oe=new CustomEvent("uiSliderUpdate")),oe}},me=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),pe=["webkit","moz"],_e=0;!window.requestAnimationFrame&&_e<pe.length;_e++)window.requestAnimationFrame=window[pe[_e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[pe[_e]+"CancelAnimationFrame"]||window[pe[_e]+"CancelRequestAnimationFrame"];function ve(){this.getText=function(e,t){return ftData.textMap?e in ftData.textMap?t in ftData.textMap[e]?ftData.textMap[e][t]:ftData.textMap[e].default:"":ftData[e]?ftData[e]:""},this.fonts={primary:"Avenir_Black_Mod",secondary:"Avenir_Medium_Mod"},e.clickTag=ftData.Clicktag_1?[1,ftData.Clicktag_1]:[1],this.hasModule="true"===ftData.use_travel_style_module,this.imagesArray=[],this.endframeImagesArray=[];var t=adParams.adPath+"common/images/";this.hasModule&&(this.moduleImages={ellipse:z(t+"/module_ellipse.png"),active:z(t+"/module_active.png"),budget:z(t+"/module_budget.png"),family:z(t+"/module_family.png"),relaxed:z(t+"/module_relaxed.png"),romantic:z(t+"/module_romantic.png"),spoccasion:z(t+"/module_spoccasion.png")}),this.color={border:"#707070"};var a={adventures:t+"logo_adventures.svg",aulani:t+"logo_aulani.svg",cruise:t+"logo_cruise.svg",parks:t+"logo_parks.svg",disneyland:t+"logo_disneyland.svg",vacationclub:t+"logo_vacationclub.svg",springs:t+"disney_springs_logo_R.png"},r=(ftData.adType||adParams.type||"parks").toLowerCase();this.logoFile=ftData.getImage("logo",adParams.adSize).indexOf("http")>-1?ftData.getImage("logo",adParams.adSize):a[r];var i={adventures:{primary:"#F29030",overStart:"#f0b67c",overEnd:"#ed7e12"},aulani:{primary:"#00A0AF",overStart:"#6edbe5",overEnd:"#00A0AF"},cruise:{primary:"#212457",overStart:"#4248ab",overEnd:"#1a1d50"},parks:{primary:"#0A7AB8",overStart:"#1994d7",overEnd:"#0470ab"},disneyland:{primary:"#0A7AB8",overStart:"#1994d7",overEnd:"#0470ab"},vacationclub:{primary:"#0A7AB8",overStart:"#1994d7",overEnd:"#0470ab"}}[r];this.ad_type="standard",this.skip_first_frame="true"==ftData.skipIntroFrostedFrame,this.endframe_offer_orientation=ftData.endframeOfferOrientation,this.endframe_offer_flip="true"==ftData.endframeOfferFlip.toLowerCase(),this.use_endframe_separator_line="true"==ftData.useEndframeSeparatorLine.toLowerCase(),this.endframe_headline_text=ftData.getText("endframe_headline_text",adParams.adSize),this.endframe_subline_text=ftData.getText("endframe_subline_text",adParams.adSize),this.endframe_offer_value=ftData.getText("endframe_offer_value",adParams.adSize),this.endframe_offer_text_left=ftData.getText("endframe_offer_text_left",adParams.adSize),this.endframe_offer_text_top=ftData.getText("endframe_offer_text_top",adParams.adSize),this.endframe_offer_text_right=ftData.getText("endframe_offer_text_right",adParams.adSize),this.endframe_offer_text_bottom=ftData.getText("endframe_offer_text_bottom",adParams.adSize),this.travel_style_module_header=ftData.travelStyleModuleHeader||ftData.getText("travel_style_module_header",adParams.adSize),this.text_color=ftData.textColor||"#fff",this.legal_text=ftData.legalText,this.legal_text_color=ftData.legalTextColor||"#707070",this.cta_text=ftData.ctaText,this.cta_text_out_color=ftData.ctaTextOutColor||"#fff",this.cta_text_over_color=ftData.ctaTextOverColor||"#fff",this.cta_button_out_color=ftData.ctaButtonOutColor||i.primary,this.cta_button_over_startColor=ftData.ctaButtonOverStartColor||i.overStart,this.cta_button_over_endColor=ftData.ctaButtonOverEndColor||i.overEnd,this.footer_color=ftData.footerColor||"#fff",this.footer_visibility=ftData.footerVisibility,this.endframe_full_blur="true"==ftData.endframeFullFrost,this.endframe_frost_level=ftData.endframeFrostLevel||(this.endframe_full_blur?"full":"half"),this.endframe_frost_level=this.endframe_frost_level.toLowerCase(),this.endframe_frost_darkness=parseFloat(ftData.endframeFrostDarkness),this.time_per_frame=parseFloat(ftData.timePerFrame),this.image_frost_levels=[];for(var n=0;n<5;n++)this.image_frost_levels.push(ftData["image_0"+(n+1)+"_frost_level"]||"none");for(this.image_frost_darkness=[],n=0;n<5;n++)this.image_frost_darkness.push(parseFloat(ftData["image_0"+(n+1)+"_frost_darkness"])||0);var o=adParams.adPath;if(this.logo=z(this.logoFile),this.textsArray=[],ftData.textMap)for(var s in ftData.textMap){var l=ftData.getText(s,adParams.adSize);this.textsArray.push(l)}else for(n=1;n<=5;n++)(l=ftData.getText("image_0"+n+"_text"))&&this.textsArray.push(l);if(ftData.imageMap)for(var d in ftData.imageMap)d.match(/image/gi)&&(f=ftData.getImage(d,adParams.adSize))&&this.imagesArray.push(z(o+f));else for(n=1;n<=5;n++){var f;(f=ftData.getImage("image_0"+n))&&this.imagesArray.push(z(o+f))}this.endframe_img=ftData.getImage("endframe_img",adParams.adSize)?z(o+ftData.getImage("endframe_img",adParams.adSize)):this.imagesArray[this.imagesArray.length-1],this.endframe_text_img=ftData.getImage("endframe_text_img",adParams.adSize)?z(o+ftData.getImage("endframe_text_img",adParams.adSize)):null,this.useEndframe=!!(ftData.getImage("endframe_text_img",adParams.adSize)||this.endframe_offer_value||this.endframe_headline_text||this.endframe_subline_text),this.svg={red_video_ui:{play:'<svg viewBox="0 0 100 100"><polygon class="red_play_btn_svg_icon" fill="#ffffff" points="20,10 20,90 85,50"/></svg>',pause:'<svg viewBox="0 0 100 100"><rect class="red_play_btn_svg_icon" fill="#ffffff" x="20" y="10" class="st0" width="22" height="80"/><rect class="red_play_btn_svg_icon" fill="#ffffff" x="58" y="10" class="st0" width="22" height="80"/></svg>',mute:'<svg viewBox="0 0 100 100"><path class="red_mute_btn_svg_icon" fill="#ffffff" d="M22.2,37.4l24.4-26.5v76.7L22.8,66.2l-19.6,0V37.3L22.2,37.4z"/><path class="red_mute_btn_svg_icon" fill="#ffffff" d="M58.6,89.4V77.9c14.7,0,26.8-12.1,26.8-26.8S73.3,24.4,58.6,24.4V13C79.8,13,96.8,30,96.8,51.2 C97.1,72.3,79.8,89.4,58.6,89.4z M73.9,51.2c0,8.5-6.8,15.3-15.3,15.3V35.9C67.1,35.6,73.9,42.7,73.9,51.2z"/></svg>',unmute:'<svg viewBox="0 0 100 100"><path class="red_mute_btn_svg_icon" fill="#ffffff" d="M22.2,37.4l24.4-26.5v76.7L22.8,66.2l-19.6,0V37.3L22.2,37.4z"/></svg>',replay:'<svg viewBox="0 0 100 100"><path class="red_replay_btn_svg_icon" fill="#FFFFFF" d="M56.7,10.8v14.9C70,26,80.7,36.6,80.7,50S69.7,74.3,56.4,74.3c-13.1,0-24-10.3-24.3-23.4h13.1 l-20.9-31l-19.7,31h12.1c0.3,21.6,17.9,38.5,39.5,38.5c21.9,0,39.5-17.6,39.5-39.5C95.5,28.4,78.2,10.8,56.7,10.8z"/></svg>',fullscreen:'<svg viewBox="0 0 100 100"><path class="red_fullscreen_btn_svg_icon" fill="#ffffff" d="M10,10h30v12h-18v18h-12z M60,10v12h18v18h12v-30z M10,60h12v18h18v12h-30z M60,90v-12h18v-18h12v30z"/></svg>'}}}function ye(){this.validateImagePath=function(e){return""==e||e.indexOf("null")>-1||e.indexOf("ftBlankGif")>-1?null:e},this.Clicktag_1=myFT.instantAds.Clicktag_1||"",this.image_01_text=myFT.instantAds.image_01_text||"",this.image_02_text=myFT.instantAds.image_02_text||"",this.image_03_text=myFT.instantAds.image_03_text||"",this.image_04_text=myFT.instantAds.image_04_text||"",this.image_05_text=myFT.instantAds.image_05_text||"",this.image_01=myFT.instantAds.image_01||"instantAssets/default_300x250.jpg",this.image_01_frost_level=myFT.instantAds.image_01_frost_level||"none",this.image_01_frost_darkness=myFT.instantAds.image_01_frost_darkness||"0.1",this.image_02=myFT.instantAds.image_02||"instantAssets/ftBlankGif.gif",this.image_02_frost_level=myFT.instantAds.image_02_frost_level||"none",this.image_02_frost_darkness=myFT.instantAds.image_02_frost_darkness||"0.1",this.image_03=myFT.instantAds.image_03||"instantAssets/ftBlankGif.gif",this.image_03_frost_level=myFT.instantAds.image_03_frost_level||"none",this.image_03_frost_darkness=myFT.instantAds.image_03_frost_darkness||"0.1",this.image_04=myFT.instantAds.image_04||"instantAssets/ftBlankGif.gif",this.image_04_frost_level=myFT.instantAds.image_04_frost_level||"none",this.image_04_frost_darkness=myFT.instantAds.image_04_frost_darkness||"0.1",this.image_05=myFT.instantAds.image_05||"instantAssets/ftBlankGif.gif",this.image_05_frost_level=myFT.instantAds.image_05_frost_level||"none",this.image_05_frost_darkness=myFT.instantAds.image_05_frost_darkness||"0.1",this.endframe_offer_value=myFT.instantAds.endframe_offer_value||"",this.endframe_offer_text_left=myFT.instantAds.endframe_offer_text_left||"",this.endframe_offer_text_right=myFT.instantAds.endframe_offer_text_right||"",this.endframe_offer_text_top=myFT.instantAds.endframe_offer_text_top||"",this.endframe_offer_text_bottom=myFT.instantAds.endframe_offer_text_bottom||"",this.endframe_headline_text=myFT.instantAds.endframe_headline_text||"",this.endframe_subline_text=myFT.instantAds.endframe_subline_text||"",this.endframe_img=myFT.instantAds.endframe_img||"instantAssets/ftBlankGif.gif",this.endframe_text_img=myFT.instantAds.endframe_text_img||"instantAssets/ftBlankGif.gif",this.endframeFrostLevel=myFT.instantAds.endframe_frost_level||"half",this.endframeFrostDarkness=myFT.instantAds.endframe_frost_darkness||"0.3",this.useEndframeSeparatorLine=myFT.instantAds.use_endframe_separator_line||"true",this.endframeOfferOrientation=myFT.instantAds.endframe_offer_orientation||"auto",this.endframeOfferFlip=myFT.instantAds.endframe_offer_flip||"false",this.timePerFrame=myFT.instantAds.time_per_frame||"2.5",this.logo=myFT.instantAds.logo||"instantAssets/logo_parks.svg",this.legalText=myFT.instantAds.legal_text||"Â©Disney",this.ctaText=myFT.instantAds.cta_text||"Learn More",this.ctaButtonOutColor=myFT.instantAds.cta_button_color||"#0A7AB8",this.ctaButtonOverStartColor=myFT.instantAds.cta_button_over_start_color||"#1994d7",this.ctaButtonOverEndColor=myFT.instantAds.cta_button_over_end_color||"#0470ab",this.getImage=function(e,t){var a="";if(myFT.instantAds[e]?a=myFT.instantAds[e]:this[e]?a=this[e]:this.imageMap&&(a=e in this.imageMap?t in this.imageMap[e]?adParams.adPath+this.imageMap[e][t]:adParams.adPath+this.imageMap[e].default:""),a)return this.validateImagePath(a)},this.getText=function(e,t){var a="";return myFT.instantAds[e]?a=myFT.instantAds[e]:this[e]?a=this[e]:this.textMap&&(a=e in this.textMap?t in this.textMap[e]?this.textMap[e][t]:this.textMap[e].default:""),a}}window.requestAnimationFrame&&window.cancelAnimationFrame&&!me||(window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout);var we=function(){function t(){d(this,t)}return t.init=function(){var e=this;return new Promise(function(t,a){Promise.all([]).then(function(){e.addPreloadedImages(),e.prepareAdData()}).then(function(){t()}).catch(function(e){a(e)})})},t.addPreloadedImages=function(){B(assets.preloadedImages)},t.prepareAdData=function(){e.ftData=new ye,e.adData=new ve},t.loadDynamicJS=function(e){return new Promise(function(e,t){e()})},t}(),xe="inlineClamp",be="paragraphFitClamp",De=function e(t,a){d(this,e),W("RED_uiElement",".ui-elem","position:absolute;"),a=a||"div";var r=document.createElement(a);return H(r,"ui-elem"),(t=t||{}).id&&(r.id=t.id),N(r,t.css),t.target&&j(t.target).appendChild(r),Object.defineProperty(r,"parent",{get:function(){return r.parentNode}}),r.toString=function(){return"[object UIDiv]"},r},ke=function e(t){var a,r;d(this,e);var i=new De(t);return H(i,"ui-border"),Object.defineProperties(i,{size:{get:function(){return a},set:function(e){void 0!=e&&a!=e&&N(i,{borderWidth:a=e})}},color:{get:function(){return r},set:function(e){e&&r!=e&&N(i,{borderColor:r=e})}}}),i.toString=function(){return"[object UIBorder]"},ue.disable(i),i.color=t.color,i.size=t.size,i},Se=function(e){function t(a,r){d(this,t);var i=!0,n=!0,o=r||"div";a=a||{},r="svg"==o?"div":r;var l=s(this,e.call(this,a,r)),f=l;return f._align=a.align,Object.defineProperties(f,{x:{get:function(){return R(f,"x")},set:function(e){N(f,{x:e})}},y:{get:function(){return R(f,"y")},set:function(e){N(f,{y:e})}},enabled:{get:function(){return i},set:function(e){i=e,f.dispatchEvent(ge.componentEnabled)}},showing:{get:function(){return n},set:function(){}}}),"canvas"!=o&&"svg"!=o&&Object.defineProperties(f,{width:{get:function(){return f.offsetWidth},set:function(e){N(f,{width:e});var t=new CustomEvent(ge.RESIZE);t.direction="width",f.dispatchEvent(t)}},height:{get:function(){return f.offsetHeight},set:function(e){N(f,{height:e});var t=new CustomEvent(ge.RESIZE);t.direction="height",f.dispatchEvent(t)}}}),f.hide=function(){f.style.display="none",n=!1},f.show=function(){try{f.style.removeProperty("display")}catch(e){f.style.display=null}n=!0},f.setCss=function(e){N(f,e)},f.addChild=function(e){var t=j(e);f.appendChild(t),e._align&&ae(e,e._align)},f.inspect=function(){for(var e={},t=Object.getOwnPropertyNames(f),a=0;a<t.length;a++){var r=f[t[a]];e[t[a]]=r}},f.toString=function(){return"[object UIComponent]"},f._initAlign=function(e){var t=e?1==e:void 0!=a.target;a.align&&t&&ae(f,a.align)},f.enabled=!0,f._initAlign(),s(l,f)}return l(t,e),t}(De),Te=function e(t){d(this,e),W("RED_uiImage",".ui-image","background-repeat:no-repeat; background-size:contain;");var a=!0,r=null,i=!1,n="contain",o=!!t.aspectRatio;if(t.css,!t.source)throw new Error("UIImage : No image source set on '"+t.id+"'");t.css=t.css||{};var s=new Se(t);function l(e){var n,l,d=i?2:1,f=r.width/r.height,c=t.css.width||r.width,h=t.css.height||r.height,u=void 0==t.css.width,g=void 0==t.css.height;a||(u="height"==e,g="width"==e,c=s.width,h=s.height),u&&(n=o&&!g?h*f:c/d,s.style.width=Math.round(n)+"px"),g&&(l=o&&!u?c/f:h/d,s.style.height=Math.round(l)+"px")}return H(s,"ui-image"),Object.defineProperties(s,{source:{get:function(){return r},set:function(e){r=M(e),s.style.backgroundImage="url("+r.src+")"}},retina:{get:function(){return i},set:function(e){i=e,l()}},ratio:{get:function(){return n},set:function(e){n=e,s.style.backgroundSize=e}},aspectRatio:{get:function(){return o},set:function(e){o=e,l()}}}),s.toString=function(){return"[object UIImage]"},s.addEventListener(ge.RESIZE,function(e){l(e.direction)}),s.source=t.source,s.retina=!!t.retina,t.ratio&&(s.ratio=t.ratio),s._initAlign(),a=!1,s},Ce=function e(t){d(this,e),(t=t||{}).css=t.css||{},W("RED_uiButton",".ui-button","position:absolute",".ui-button-state","position: absolute; width:inherit; height:inherit;");var a,r=0,i=[],n=!!t.containChild,o=new Se(t);H(o,"ui-button"),t.bg&&l(t.bg,!1),f(),t.icon=t.icon||[];for(var s=0;s<t.icon.length;s++)l(t.icon[s],!0);function l(e,r){var s,l=t.id+(r?"-state-"+i.length:"-bg");"string"==typeof e?s=new Te({target:o,id:l,source:e,css:n?{width:"inherit",height:"inherit"}:{}}):((s=e).id=l,o.addChild(s),/(UITextField)/gi.exec(s.toString())&&s.resetToDefault(),s._initAlign(!0)),r?(i.push(s),H(s,"ui-button-state")):a=s,ue.disable(s)}function f(){K(o,"clamp"+(t.css.width?"":"X")+(t.css.height?"":"Y"),{},!1)}function c(e){fe(e),o.togglable&&(o.state=Number(!r)),o._onClick.call(o,e),o.onClick.call(o,e)}function h(e){o._onOver.call(o,e),o.onOver.call(o,e)}function u(e){o._onOut.call(o,e),o.onOut.call(o,e)}return f(),o.togglable=t.icon.length>1,Object.defineProperties(o,{bg:{get:function(){return a}},icon:{get:function(){return i}},state:{get:function(){return r},set:function(e){r=e,e>=i.length&&(r=0);for(var t=0;t<i.length;t++)i[t].style.visibility=t==r?"visible":"hidden"}}}),o.onClick=t.onClick||function(e){},o.onOver=t.onOver||function(e){},o.onOut=t.onOut||function(e){},o.toString=function(){return"[object UIButton]"},o._onClick=function(e){},o._onOver=function(e){},o._onOut=function(e){},o.addEventListener(ge.ENABLED,function(e){var t=o.enabled?"addEventListener":"removeEventListener";ue[t](o,"onSelect",c),ue[t](o,"mouseover",h),ue[t](o,"mouseout",u)}),o.enabled=!0,o.state=t.state||0,o._initAlign(),o},Ae=function e(t){d(this,e);var a=(t=t||{}).css.width,r=t.css.height;delete t.css.width,delete t.css.height;var i=new Se(t,"canvas");i.setAttribute("width",a),i.setAttribute("height",r);var n=i.getContext("2d"),o=i.getContext("webgl");return Object.defineProperties(i,{context2d:{get:function(){return n}},context3d:{get:function(){return o}}}),i.toString=function(){return"[object UICanvas]"},i._initAlign(!0),i},Pe=function e(t){d(this,e);for(var a=new Se(t),r=t.children.slice();r.length>0;){var i=r.shift();i&&a.appendChild(i)}return K(a,U),t.align&&ae(a,t.align),ue.disable(a),a},Oe=function e(t){var a;d(this,e),W("RED_uiTextfield",".ui-textfield","position:absolute; white-space:nowrap;",".smooth-text","-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;",".ui-textfield .content","position:relative; display:table-cell; cursor:default; pointer-events:none; line-height:100%; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;");var r,i,n,o,s,l=0,f="",c={top:0,bottom:0,left:0,right:0},h="",u=!0,g={},m=new Se(t=t||{});H(m,"ui-textfield");var p=document.createElement("span");function _(){if(!u)switch(f){case"paragraphClamp":case"inlineClamp":y();break;case"inlineFitClamp":f="inlineFit",v(),f="inlineClamp",y(),f="inlineFitClamp";break;case"paragraphFitClamp":f="paragraphFit",v(),f="paragraphClamp",y(),f="paragraphFitClamp";default:v()}}function v(){if(N(p,{verticalAlign:"auto",height:"auto",width:"auto"}),"paragraphFit"==f){for(var e=l;m.scrollHeight>m.offsetHeight&&!(e<=0);)e--,m.style.fontSize=e+"px";for(;m.scrollWidth>m.offsetWidth&&!(e<=0);)e--,m.style.fontSize=e+"px";l=e,m.style.fontSize=l+"px"}else if("inlineFit"==f){var t=m.offsetWidth,a=m.offsetHeight;m.style.fontSize="243px";var r=p.offsetWidth,i=p.offsetHeight;m.style.fontSize="182px";var n=p.offsetWidth,s=p.offsetHeight,d=w(243,182,r,n,t),h=w(243,182,i,s,a);l=~~Math.min(l,Math.min(d,h)),m.style.fontSize=l+"px"}o&&N(p,{verticalAlign:o,height:m.offsetHeight-c.top-c.bottom,width:m.offsetWidth-c.left-c.right})}function y(){N(p,{height:"auto",width:"auto"}),m.width=p.offsetWidth,m.height=p.offsetHeight}return H(p,"content"),m.appendChild(p),Object.defineProperties(m,{alignText:{get:function(){return a},set:function(e){if(e&&a!=e){var t=((a=e).match(/(left|right)/gi)||["center"])[0].toLowerCase();N(m,{lineHeight:m.height,textAlign:t}),o=(a.match(/(bottom|top)/gi)||["middle"])[0].toLowerCase(),N(p,{verticalAlign:o})}}},fontSize:{get:function(){return l},set:function(e){!isNaN(e)&&e>0&&(l=e,m.style.fontSize=~~e+"px",_())}},fontFamily:{get:function(){return r},set:function(e){r=e,m.style.fontFamily=e,_()}},format:{get:function(){return f},set:function(e){f!=e&&(N(m,{whiteSpace:null!=/inline/g.exec(f=e)?"nowrap":"normal"}),_())}},leading:{get:function(){return i},set:function(e){e&&i!=e&&(N(p,{lineHeight:100*(i=e)+"%"}),_())}},spacing:{get:function(){return R(m,"letter-spacing")||n},set:function(e){e&&n!=e&&(n=e,N(m,{letterSpacing:e}),_())}},bufferText:{get:function(){return c},set:function(e){if(e&&c!=e){for(var t="",a=["top","right","bottom","left"],r=0;r<4;r++){var i=a[r],n=isNaN(e)?e[i]||0:e;c[i]=n,t+=n+"px "}N(p,{padding:t}),_()}}},text:{get:function(){return h},set:function(e){void 0!=e&&""!=e&&(h=e,m.setDefault("text",e),p.innerHTML=e,_())}},smoothing:{get:function(){return s},set:function(e){V[(s=e)?"addClass":"removeClass"](p,"smooth-text")}}}),m.resetToDefault=function(){if(u=!0,arguments.length>0)for(var e=0;e<arguments.length;e++)m[arguments[e]]=g[arguments[e]];else for(var t in g)void 0!=m[t]&&"align"!==t&&(m[t]=g[t]);u=!1,_()},m.setDefault=function(e,t){g[e]=t},m.toString=function(){return"[object UITextfield]"},m.enabled=!0,function(){for(var e in t)if("css"==e)for(var a in t.css)switch(a){case"x":case"y":case"width":case"height":g[a]=t.css[a]}else if("bufferText"==e)for(var r in g[e]={},c)g[e][r]=t[e][r]||0;else g[e]=t[e];delete g.target,delete g.id}(),m.format=t.format,m.fontSize=t.fontSize,m.fontFamily=t.fontFamily||"Arial",m.alignText=t.alignText,m.bufferText=t.bufferText,m.leading=t.leading,m.spacing=t.spacing,m.smoothing=0!=t.smoothing,u=!1,m.text=t.text,m._initAlign(),m},Fe=function(){function e(t){return d(this,e),this._init(t),this}return e.prototype._init=function(e){var t=this,a={width:e.css&&e.css.width?e.css.width:e.target&&"body"!==e.target?R(e.target,"width"):adParams.adWidth,height:e.css&&e.css.height?e.css.height:e.target&&"body"!==e.target?R(e.target,"height"):adParams.adHeight,background:!0===e.debug?"green":"",pointerEvents:"none"};if(e.css)for(var r in e.css)a[r]=e.css[r];!0===e.subPixeling&&(e.retina=!0),t.qualityScale=e.retina?2:1,t._imageScale=e.subPixeling?1:t.qualityScale,a.width*=t.qualityScale,a.height*=t.qualityScale,t.canvas=new Ae({id:"cd_"+e.id,target:e.target,css:x(a)}),1!==t.qualityScale&&N(t.canvas,{width:t.canvas.width/t.qualityScale,height:t.canvas.height/t.qualityScale}),e.align&&ae(t,e.align),t.ctx=t.canvas.context2d,t.elements={},t._allTweens={},t._allTweensSize=0,t.elementsLength=0,t._dummyTween,t.clearCanvas=0!=e.clearCanvas},e.prototype.bringItemToFront=function(e){this.removeElement(e),this.elements[e.id]=e},e.prototype.removeElement=function(e){this.elementsLength--,e.id?delete this.elements[e.id]:delete this.elements[e]},e.prototype.removeAllElements=function(){for(var e in this.elements)this.elementsLength--,delete this.elements[e];this.elementsLength=0},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.update=function(e){var t=this;if(t.clearCanvas&&t.clear(),e)for(var a=0;a<e.length;a++)t._updateEngine(e[a]);else for(var a in t.elements)t._updateEngine(t.elements[a])},e.prototype._updateEngine=function(e){var t=this;if(e.visible&&e.alpha>0){var a=0!=e.rotation||1!=e.scaleX||1!=e.scaleY||1!=e.scale,r=e.alpha<1||"source-over"!=e.blendMode,i="arc"===e._type;t.ctx.save(),r&&(t.ctx.globalAlpha=e.alpha,t.ctx.globalCompositeOperation=e.blendMode),a&&(t.ctx.translate.apply(t.ctx,[(e.x+e._offsetX)*t.qualityScale,(e.y+e._offsetY)*t.qualityScale]),0!=e.rotation&&t.ctx.rotate(v(e.rotation)),1==e.scaleX&&1==e.scaleY&&1==e.scale||(0===e.scaleX&&(e.scaleX=1e-6),0===e.scaleY&&(e.scaleY=1e-6),0===e.scale&&(e.scale=1e-6),t.ctx.scale(e.scaleX*e.scale,e.scaleY*e.scale))),t._drawShape(e,i,a),t.ctx.restore()}},e.prototype._drawShape=function(e,t,a){var r=this;e.shadowColor&&(e.shadowBlur>0||0!=e.shadowDistance)&&(r.ctx.shadowColor=e.shadowColor,r.ctx.shadowOffsetX=e._shadowOffsetX*r.qualityScale,r.ctx.shadowOffsetY=e._shadowOffsetY*r.qualityScale,r.ctx.shadowBlur=e.shadowBlur*r.qualityScale),e.draw(a,t)},e.prototype._getIsSourceCanvas=function(e){return"CANVAS"===e.tagName||"object"===(void 0===e?"undefined":r(e))&&void 0===e.tagName},i(e,[{key:"width",get:function(){return this.canvas.width/this.qualityScale},set:function(e){this.canvas.width=e*this.qualityScale}},{key:"height",get:function(){return this.canvas.height/this.qualityScale},set:function(e){this.canvas.height=e*this.qualityScale}}]),e}(),Ee=function(){function e(t,a){d(this,e);var r=this,i=t.params;r._type=t.type||a,r.stage=t.target,r.id=t.id||"canvasdItem"+r.stage.elementsLength,r.stage.elements[r.id]=this,r.stage.elementsLength++,r.visible=!1!==t.visible,r.rotation=i.rotation||0,r.scale=0===i.scale?0:i.scale||1,r.scaleX=0===i.scaleX?0:i.scaleX||1,r.scaleY=0===i.scaleY?0:i.scaleY||1,r.alpha=i.alpha>=0?i.alpha:1,r.blendMode=t.blendMode||"source-over",r._transformOrigin="0 0",t.stroke=t.stroke||{};var n=t.dropShadow,o=!!n;n=n||{},r._shadowAngle=n.angle||0,r.shadowDistance=n.distance||0,r._shadowColor=n.color||(o?"#000000":null),r.shadowAlpha=n.alpha||r._shadowAlpha,r.shadowBlur=n.blur||0}return e.prototype.toString=function(){return"[object CanvasElement]"},e.prototype._setShadowOffsets=function(e,t){var a=this,r=v(-1*a._shadowAngle+180);a._shadowOffsetX=Number((Math.cos(r)*a._shadowDistance).toFixed(8)),a._shadowOffsetY=Number((Math.sin(r)*a._shadowDistance).toFixed(8))},i(e,[{key:"shadowAngle",get:function(){return this._shadowAngle},set:function(e){this._shadowAngle=e,this._setShadowOffsets()}},{key:"shadowDistance",get:function(){return this._shadowDistance},set:function(e){this._shadowDistance=e,this._setShadowOffsets()}},{key:"shadowColor",get:function(){return this._shadowColor},set:function(e){this._shadowColor=null===e?null:u(e,this._shadowAlpha)}},{key:"shadowAlpha",get:function(){return this._shadowAlpha},set:function(e){this._shadowAlpha=e,this.shadowColor=this._shadowColor}},{key:"transformOrigin",get:function(){return this._transformOrigin},set:function(e){var t=this,a=e.split(" ")[0],r=e.split(" ")[1];switch(t._transformOrigin=e,a=a.indexOf("%")>=0?+a.replace(/%/g,"")/100:a.indexOf("px")>=0?+a.replace(/px/g,"")/t.width:+a/t.width,r=r.indexOf("%")>=0?+r.replace(/%/g,"")/100:r.indexOf("px")>=0?+r.replace(/px/g,"")/t.height:+r/t.height,t._type){case"arc":case"path":a-=.5,r-=.5;default:t._offsetX=t.width*a,t._offsetY=t.height*r;break;case"text":switch(t._transOffsetX=a,t._transOffsetY=r,t.textAlign){case"center":t._transOffsetX-=.5;break;case"right":t._transOffsetX*=-1}t._wrapText(!1,!1)}}}]),e}(),Le=function(e){function t(a){d(this,t);var r=s(this,e.call(this,a,a.type)),i=r;i.drawScale=a.drawScale||1,i.fill=a.fill;var n=a.stroke;return i.strokeFill=n.fill||null,i.strokeWidth=n.width||0,i.strokeCap=n.cap||"butt",i.strokeJoin=n.join||"miter",i.strokeDashSize=n.dashSize||1e4,i.strokeDashGap=n.dashGap||0,i.strokeDashOffset=n.dashOffset||0,i.strokePosition=n.position||"outer",i._closePath=0!=a.closePath,0===i.strokeDashGap&&1e4!=i.strokeDashSize&&(i.strokeDashGap=i.strokeDashSize),i._setDrawArgs(a),a.align&&ae(i,a.align),r}return l(t,e),t.prototype._setDrawArgs=function(e){var t=e.params||[0,0,0,0,0];switch(this._type){case"rect":t=[t.x||0,t.y||0,t.width||t.height,t.height||t.width];break;case"arc":var a=void 0===t.startAngle?t.startRad:v(t.startAngle),r=void 0===t.endAngle?t.endRad:v(t.endAngle);a||(a=0),r||(r=2*Math.PI),t=[t.x||0,t.y||0,t.width>=0?t.width/2:t.radius,a,r]}this.args=t,this._setShapeParams(e.points||t,e),this.transformOrigin=t.transformOrigin||e.transformOrigin||(e.params?e.params.transformOrigin:null)||"50% 50%"},t.prototype.draw=function(e,t){var a=this;a.strokeDashSize>0&&a.strokeDashGap>0&&a.stage.ctx.setLineDash([a.strokeDashSize*a.stage.qualityScale,a.strokeDashGap*a.stage.qualityScale]),a.stage.ctx.lineDashOffset=a.strokeDashOffset;var r="outer"===a.strokePosition,i=a.strokeWidth>0;a.stage.ctx.beginPath(),a.stage.ctx.strokeStyle=a.strokeFill,a.stage.ctx.lineWidth=a.strokeWidth*a.stage.qualityScale*(r?2:1),a.stage.ctx.lineCap=a.strokeCap,a.stage.ctx.lineJoin=a.strokeJoin,a._prepDrawing(e),a._closePath&&a.stage.ctx.closePath(),r&&i&&a.stage.ctx.stroke(),a.fill&&(a.stage.ctx.fillStyle=a.fill,a.stage.ctx.fill()),!r&&i&&a.stage.ctx.stroke()},t}(Ee),ze=function(e){function t(a){return d(this,t),a.type="arc",s(this,e.call(this,a))}return l(t,e),t.prototype._setShapeParams=function(e){this.x=e[0],this.y=e[1],this.width=this.height=2*e[2]},t.prototype._prepDrawing=function(e){var t=this;e?(t.args[0]=-t._offsetX*t.stage.qualityScale,t.args[1]=-t._offsetY*t.stage.qualityScale):(t.args[0]=t.x*t.stage.qualityScale,t.args[1]=t.y*t.stage.qualityScale),t.args[2]=t.width/2*t.stage.qualityScale,t.args[2]<0&&(t.args[2]=0),t.stage.ctx.arc.apply(t.stage.ctx,t.args)},i(t,[{key:"startAngle",get:function(){return y(this.args[3])},set:function(e){this.args[3]=v(e)}},{key:"endAngle",get:function(){return y(this.args[4])},set:function(e){this.args[4]=v(e)}},{key:"startRad",get:function(){return this.args[3]},set:function(e){this.args[3]=e}},{key:"endRad",get:function(){return this.args[4]},set:function(e){this.args[4]=e}}]),t}(Le),Me=function(e){function t(a){return d(this,t),a.type="rect",s(this,e.call(this,a))}return l(t,e),t.prototype._setShapeParams=function(e){this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3]},t.prototype._prepDrawing=function(e){var t=this;e?(t.args[0]=-t._offsetX*t.stage.qualityScale,t.args[1]=-t._offsetY*t.stage.qualityScale):(t.args[0]=t.x*t.stage.qualityScale,t.args[1]=t.y*t.stage.qualityScale),t.args[2]=t.width*t.stage.qualityScale,t.args[3]=t.height*t.stage.qualityScale,t.stage.ctx.rect.apply(t.stage.ctx,t.args)},t}(Le),Ie=function(e){function t(a){d(this,t);var r=a.params=a.params||{},i=s(this,e.call(this,a,"image")),o=i,l=a.target._getIsSourceCanvas(a.source);"VIDEO"===a.source.tagName?o.src=a.source:o.src=l?"CANVAS"===a.source.tagName?a.source:a.source.canvas:"IMG"===a.source.tagName?a.source:M(a.source),"svg"===n.LoaderUtils.getFileType(o.src.src)&&Array(100).join("~");var f=o.src.width||o.src.getAttribute("width"),c=o.src.height||o.src.getAttribute("height");o.x=r.x||0,o.y=r.y||0;var h=o.stage._imageScale;if(a.fitTo){var u=function(){var e=arguments;o[e[2]]=e[5]*(g[e[3]]/e[4]),r["source"+e[0]]=e[4],r["source"+e[1]]=g[e[2]]*(e[5]/o[e[2]])},g=a.fitTo,m=f>c,p=(g.width,g.height,["H","W","width","height",c,f]),_=["W","H","height","width",f,c];if(m?(u.apply(o,p),o.width<g.width&&u.apply(o,_)):(u.apply(o,_),o.height<g.height&&u.apply(o,p)),o.width=g.width,o.height=g.height,g.origin){var v=function(e){function t(){var e=arguments,t=e[0],a=e[2];r["source"+e[1]]==e[5]&&(y[t]=g.origin[t]*(g[a]/e[5])),y[t]>g[a]&&(y[t]=g[a],r["source"+t.toUpperCase()]=e[5]-r["source"+e[1]])}for(var a in w&&function(){var e=arguments;y[e[0]]*=o[e[3]]*e[5]/e[4]/e[5],y["x"===e[0]?"y":"x"]*=o[e[3]]/e[4]}.apply(o,arguments),function(){var e=arguments;if(e.length){var t=o[e[3]]/e[4],a="source"+e[0].toUpperCase();if(r[a]=y[e[0]]/1-.5*g[e[2]]/t,r[a]>=0&&r[a]<=e[5]-r["source"+e[1]])for(var i in y)y[i]=(y[i]-r["source"+i.toUpperCase()])*t}}.apply(o,w?null:e),t.apply(o,p),t.apply(o,_),y){var i="source"+a.toUpperCase();(y[a]<0||r[i]<0)&&(y[a]=r[i]=0)}},y={x:g.origin.x||0,y:g.origin.y||0},w=g.width===g.height;if(r.sourceX=r.sourceY=0,p[0]="x",_[0]="y",w?v.apply(o,m?p:_):m?g.width>g.height?v(_):v(p):g.height>g.width?v(p):v(_),r.transformOrigin=y.x+" "+y.y,g.debug){var x={target:o.stage,fill:"yellow",params:{width:1,height:1}},b=new Me(x),D=new Me(x);y.radius=10;var k=new ze({target:o.stage,params:y,stroke:{fill:"yellow",width:2}});b.height=g.height,D.width=g.width,b.x=k.x-b.width/2,D.y=k.y-D.height/2}}}else if(a.aspectRatio){var S=void 0===r.width,T=void 0===r.height;!S&&T?(o.width=r.width,o.height=c*(r.width/f)):!T&&S&&(o.height=r.height,o.width=f*(r.height/c))}else o.width=r.width||f/h,o.height=r.height||c/h;return o.sourceX=r.sourceX||0,o.sourceY=r.sourceY||0,o.sourceW=Math.floor(r.sourceW||f||o.width*h),o.sourceH=Math.floor(r.sourceH||c||o.height*h),o.transformOrigin=r.transformOrigin||a.transformOrigin||"50% 50%",a.align&&ae(o,a.align),i}return l(t,e),t.prototype.warn=function(e){var t=this,a=void 0,r=void 0;switch(e){case"X":case"Y":a="X"===e?"W":"H",r="X"===e?"width":"height";break;case"W":case"H":a="W"===e?"X":"Y",r="W"===e?"width":"height"}var i="_error"+e,n=t["_source"+e]+t["source"+a]-t.src[r];return t[i],t[i]=n>0,t[i]},t.prototype.draw=function(e){var t=this;try{if(t.warn("X"))return;if(t.warn("Y"))return;var a=void 0,r=void 0;e?(a=-t._offsetX,r=-t._offsetY):(a=t.x,r=t.y),t.stage.ctx.drawImage(t.src,t.sourceX,t.sourceY,t.sourceW,t.sourceH,a*t.stage.qualityScale,r*t.stage.qualityScale,t.width*t.stage.qualityScale,t.height*t.stage.qualityScale),t._errorThrown=!1}catch(e){if(t._errorThrown)return;t._errorThrown=!0}},t}(Ee);function Xe(e){var t=e.canvas||e;try{return t.context2d.getImageData(0,0,t.width,t.height)}catch(t){Ye(e,"get")}}function Be(e,t){var a=e.canvas||e;try{a.context2d.putImageData(t,0,0)}catch(t){Ye(e,"set")}}function Ye(e,t){var a="Unable to "+t+" image data, try a Local Server or network connection.\n- And/or -\n";if(e.canvas)for(var r in a+="ImageManager failed to load ONE or ALL of the following as 'forCanvas':",e.elements)if("image"===e.elements[r]._type){var i=e.elements[r].src;a+="\n\t"+i.id+": "+i.src}throw a+="\nMake sure images used on Canvas elements are loaded using the model: ",a+="ImageManager.addToLoad ( 'http://some/full/file/path/sample.png', { forCanvas:true });",new Error(a)}function je(){var e=this;e.r=0,e.g=0,e.b=0,e.a=0,e.next=null}for(var Ne=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Re=[1,1,2,2,4,4,7,9,14,18,27,37,54,74],We=[9],He=0;He<Re.length;He++){for(var Ve=[],qe=0;qe<Re[He];qe++)Ve.push(He+11);We=We.concat(Ve)}function Ue(e){var t=!1,a=!1,i=e.amount;switch(void 0===i?"undefined":r(i)){case"number":t=a=!0;break;case"object":i=0,e.amount.x>0&&(i+=e.amount.x,t=!0),e.amount.y>0&&(i+=e.amount.y,a=!0),i/=+t+ +a}var n=e.target;if(e.clear||0===i){if(!n.update)throw new Error("Unable to clear a canvas DOM element, requires CanvasDrawer. Effects will stack, not reset.");n.update()}if(!(isNaN(i)||i<1)){i|=0;var o=e.alpha;e=null;var s,l,d,f,c,h,u,g,m,p,_,v,y,w,x,b,D,k,S,T,C,A,P,O,F=Xe(n=n.canvas||n),E=F.data,L=new je,z=L,M=null,I=null,X=n.width,B=n.height,Y=i+i+1,j=X-1,N=B-1,R=i+1,W=R*(R+1)/2;for(d=1;d<Y;d++)if(z=z.next=new je,d==R)var H=z;z.next=L,u=h=0;var V=Ne[i],q=We[i];if(t)for(l=0;l<B;l++){for(b=D=k=S=g=m=p=_=0,v=R*(T=E[h]),y=R*(C=E[h+1]),w=R*(A=E[h+2]),g+=W*T,m+=W*C,p+=W*A,o&&(x=R*(P=E[h+3]),_+=W*P),z=L,d=0;d<R;d++)z.r=T,z.g=C,z.b=A,o&&(z.a=P),z=z.next;for(d=1;d<R;d++)o&&(_+=(z.a=P=E[f+3])*O,S+=P),f=h+((j<d?j:d)<<2),g+=(z.r=T=E[f])*(O=R-d),m+=(z.g=C=E[f+1])*O,p+=(z.b=A=E[f+2])*O,b+=T,D+=C,k+=A,z=z.next;for(M=L,I=H,s=0;s<X;s++)o?(E[h+3]=P=_*V>>q,0!=P?(P=255/P,E[h]=(g*V>>q)*P,E[h+1]=(m*V>>q)*P,E[h+2]=(p*V>>q)*P):E[h]=E[h+1]=E[h+2]=0):(E[h]=g*V>>q,E[h+1]=m*V>>q,E[h+2]=p*V>>q),g-=v,m-=y,p-=w,v-=M.r,y-=M.g,w-=M.b,o&&(_-=x,x-=M.a),f=u+((f=s+i+1)<j?f:j)<<2,g+=b+=M.r=E[f],m+=D+=M.g=E[f+1],p+=k+=M.b=E[f+2],v+=T=I.r,y+=C=I.g,w+=A=I.b,b-=T,D-=C,k-=A,o&&(_+=S+=M.a=E[f+3],x+=P=I.a,S-=P),M=M.next,I=I.next,h+=4;u+=X}if(a)for(s=0;s<X;s++){for(D=k=S=b=m=p=_=g=0,v=R*(T=E[h=s<<2]),y=R*(C=E[h+1]),w=R*(A=E[h+2]),g+=W*T,m+=W*C,p+=W*A,o&&(x=R*(P=E[h+3]),_+=W*P),z=L,d=0;d<R;d++)z.r=T,z.g=C,z.b=A,o&&(z.a=P),z=z.next;for(c=X,d=1;d<=i;d++)h=c+s<<2,g+=(z.r=T=E[h])*(O=R-d),m+=(z.g=C=E[h+1])*O,p+=(z.b=A=E[h+2])*O,b+=T,D+=C,k+=A,o&&(_+=(z.a=P=E[h+3])*O,S+=P),z=z.next,d<N&&(c+=X);for(h=s,M=L,I=H,l=0;l<B;l++)f=h<<2,o?(E[f+3]=P=_*V>>q,E[f]=P>0?(g*V>>q)*(P=255/P):E[f+1]=E[f+2]=0):(P=1,E[f]=g*V>>q),E[f+1]=(m*V>>q)*P,E[f+2]=(p*V>>q)*P,g-=v,m-=y,p-=w,v-=M.r,y-=M.g,w-=M.b,f=s+((f=l+R)<N?f:N)*X<<2,g+=b+=M.r=E[f],m+=D+=M.g=E[f+1],p+=k+=M.b=E[f+2],v+=T=I.r,y+=C=I.g,w+=A=I.b,b-=T,D-=C,k-=A,o&&(_-=x,x-=M.a,_+=S+=M.a=E[f+3],x+=P=I.a,S-=P),M=M.next,I=I.next,h+=X}Be(n,F)}}function Ke(e){if(e.color&&(e.color=h(e.color),void 0===e.color.r))throw new Error("The color passed to CanvasColorUtils does not meet the HEX or RGB/A definition requirement: given '"+e.color+"'");var t=e.target;if(e.amount=void 0===e.amount?1:e.amount,e.clear){if(!t.update)throw new Error("Unable to clear a canvas DOM element, requires CanvasDrawer. Effects will stack, not reset.");t.update()}var a=Xe(t=t.canvas||t),r=a.data,i=void 0,n=["r","g","b"],o=void 0,s=void 0;for(o=0;o<r.length;o+=4)for(i=_[e.type]({from:{r:r[o],g:r[o+1],b:r[o+2]},to:e.color||null,amount:e.amount,format:"object"}),s=0;s<3;s++)r[o+s]=i[n[s]];Be(t,a)}function Ge(e){for(var t=e.target.ctx.createLinearGradient(e.xStart*e.target.qualityScale,e.yStart*e.target.qualityScale,e.xEnd*e.target.qualityScale,e.yEnd*e.target.qualityScale),a=0;a<e.colors.length;a++)t.addColorStop(e.colors[a].stopVal,e.colors[a].color);return t}function $e(e){var t=e.source,a=e.repeat||"repeat",r=e.target._getIsSourceCanvas(t)?"CANVAS"===t.tagName?t:t.canvas:"IMG"===t.tagName?t:M(t);return e.target.ctx.createPattern(r,a)}function Je(e){(new Ze).init(e.stage||e)}var Ze=function(){function e(){d(this,e)}return e.prototype.init=function(e){var t=this;t._drawer=e,t._drawer.tween={to:function(e,a,r){t._tweenEngine("to",[e,a,r])},from:function(e,a,r){t._tweenEngine("from",[e,a,r])},fromTo:function(e,a,r,i){t._tweenEngine("fromTo",[e,a,r,i])},set:function(e,a){t._tweenEngine("set",[e,a])},start:function(e){t._tweenStart(e)},kill:function(){t._tweenKill()}}},e.prototype._tweenEngine=function(e,t){t[0]="string"==typeof t[0]?this._drawer.elements[t[0]]:t[0];var a={to:2,from:2,fromTo:3,set:1};if(t[a[e]].transformOrigin&&(t[0].transformOrigin=t[a[e]].transformOrigin,delete t[a[e]].transformOrigin),"from"===e){e="to";var r,i={};for(var n in t[2])void 0!=t[0][n]&&(i[n]=t[2][n],t[2][n]=t[0][n],(r=String(i[n]).replace(/=/g,"")).indexOf("-")>=0||r.indexOf("+")>=0?t[0][n]+=Number(r):t[0][n]=Number(r))}t[t.length-1].paused=!1!==t[t.length-1].paused;var o=TweenLite[e].apply(this,t);this._drawer._allTweens["newTween"+this._drawer._allTweensSize++]=o,!1===t[t.length-1].paused&&this._tweenStart()},e.prototype._tweenStart=function(e){var t,a=this,r=0,i=e||[];for(var n in a._drawer._allTweens)a._drawer._allTweens[n].delay(a._drawer._allTweens[n].delay()+(i.delay||0)),(t=a._drawer._allTweens[n].duration()+a._drawer._allTweens[n].delay())>r&&(r=t),a._drawer._allTweens[n].play();a._drawer._dummyTween&&(t<r&&(t=r),a._drawer._dummyTween.kill());var o,s,l=null;i.onStart&&(l=function(){i.onStart.apply(this,i.onStartParams?i.onStartParams:null)}),o=i.onUpdate?function(){i.onUpdate.apply(this,i.onUpdateParams?i.onUpdateParams:null),a._drawer.update()}:a._drawer.update.bind(a._drawer),s=i.onComplete?function(){a._tweenKill(),i.onComplete.apply(this,i.onCompleteParams?i.onCompleteParams:null)}:a._tweenKill.bind(a),r+=i.timePadding&&i.timePadding>0?i.timePadding:0,a._drawer._dummyTween=TweenLite.to({},r,{onStart:l,onUpdate:o,onComplete:s,delay:i.delay||0})},e.prototype._tweenKill=function(){for(var e in this._drawer._allTweens)this._drawer._allTweens[e]&&this._drawer._allTweens[e].kill(),delete this._drawer._allTweens[e];this._drawer._allTweens={},this._drawer._allTweensSize=0,this._drawer._dummyTween&&this._drawer._dummyTween.kill(),this._drawer._dummyTween=null},e}(),Qe=function e(t){d(this,e);var a=t.ears||{},r=a.scaleOUT||10,i=a.css||{width:50,height:50},n=a.offsetY,o=a.offsetX,s=t.id,l=new Se(t);l.preloaderCanvasDrawer=new Fe({id:s+"-canvas-drawer",target:l,css:{width:t.css.width,height:t.css.height}}),l.rect=new Me({target:l.preloaderCanvasDrawer,id:s+"myRect",params:{width:t.css.width,height:t.css.height},fill:"#ffffff"});var f=new Fe({id:s+"dummy-CD",css:i});return new Ie({id:s+"dummyMickey",target:f,source:"mickeyPNG",params:{width:f.width,height:f.height},align:J}),f.update(),l.mickey=new Ie({id:s+"mickey",target:l.preloaderCanvasDrawer,source:f,align:{x:{type:J,offset:o},y:{type:J,offset:n}},blendMode:"destination-out"}),Je(l.preloaderCanvasDrawer),l.preloaderCanvasDrawer.update(),ue.disable(l),l.animateIN=function(e){var t=e||.1;l.preloaderCanvasDrawer.tween.to(l.mickey,.4,{delay:t,scale:r,ease:Power4.easeIn}),t+=.2,l.preloaderCanvasDrawer.tween.start()},l},et=function e(t){d(this,e);var a,r=t.blurAmount||30,i=new Se({id:t.id,target:t.target,css:{width:t.css.width,height:t.css.height,zIndex:t.css.zIndex}});if(i.canvasLowerBlur=new Fe({id:t.id+"_canvasBlur",css:{width:t.css.width,height:t.css.height}}),i.image2=new Ie({id:t.id+"_canvasImage2",target:i.canvasLowerBlur,source:t.image.source,params:t.image.params}),i.mask=new Ie({id:t.id+"_mask",target:i.canvasLowerBlur,source:"mask",blendMode:"destination-in"}),i.canvasLowerBlur.update(),t.lowerBlur&&Ue({target:i.canvasLowerBlur,amount:3}),i.canvas2=new Fe({id:t.id+"_canvas2",css:{width:t.css.width,height:t.css.height,opacity:1}}),i.image3=new Ie({id:t.id+"_canvasImage3",target:i.canvas2,source:t.image.source,params:t.image.params}),i.image4=new Ie({id:t.id+"_canvasImage4",target:i.canvas2,source:i.canvasLowerBlur,params:t.image.params}),t.gradient){var n="ie"==f.browser&&f.browserVersion<12,o=Ge({target:i.canvas2,xStart:t.gradientData.xStart||0,yStart:t.gradientData.yStart||0,xEnd:t.gradientData.xEnd||0,yEnd:t.gradientData.yEnd||t.mask.params.height,colors:t.gradientData.colors||[{stopVal:0,color:"rgba(0, 0, 0, 0)"},{stopVal:1,color:n?"rgba(0, 0, 0, 0.5)":"rgba(150, 150, 150, 1)"}]});i.gradient=new Me(n?{target:i.canvas2,id:"myRect",params:{x:t.mask.params.x,y:t.mask.params.y,width:t.mask.params.width,height:t.mask.params.height,alpha:t.gradientData.opacity||0!=t.gradientData.opacity?1:0},fill:o}:{target:i.canvas2,id:"myRect",params:{x:t.mask.params.x,y:t.mask.params.y,width:t.mask.params.width,height:t.mask.params.height,alpha:t.gradientData.opacity||0!=t.gradientData.opacity?1:0},fill:o,blendMode:"multiply"})}return t.noise&&(i.pattern=$e({target:i.canvas2,source:"noise",repeat:void 0}),new Me({target:i.canvas2,id:"myRect",params:{width:adParams.adWidth,height:adParams.adHeight,alpha:.1},fill:i.pattern,blendMode:"screen"})),i.canvas2.update(),t.tint&&((a={target:i.canvas2,color:"#000000",amount:.1}).type="tint",Ke(a)),t.blur&&Ue({target:i.canvas2,amount:r}),i.canvas=new Fe({id:t.id+"_canvas",target:i,css:{width:t.css.width,height:t.css.height,opacity:t.css.opacity}}),i.image=new Ie({id:t.id+"_canvasImage",target:i.canvas,source:i.canvas2,params:t.image.params}),t.darknessAmount&&(i.darknessAmount=new Me({id:t.id+"_darknessAmount",target:i.canvas,params:{width:adParams.adWidth,height:adParams.adHeight,alpha:t.darknessAmount},fill:"#000000"})),i.mask=new Me({target:i.canvas,id:t.id+"_mask",params:t.mask.params,fill:"blue",blendMode:"destination-in"}),i.canvas.update(),Je(i.canvas),i.play=function(e){TweenLite.to(i.canvas.canvas,1,{opacity:1});var t=e||1.75;i.canvas.tween.from(i.mask,t,{scaleX:0,transformOrigin:"100% 50%",ease:Expo.easeInOut,delay:0}),i.canvas.tween.start()},i.rightBlur=function(){TweenLite.to(i.canvas.canvas,1,{opacity:1}),i.canvas.tween.from(i.mask,1.75,{scaleX:0,transformOrigin:"100% 0%",ease:Power4.easeInOut,delay:0}),i.canvas.tween.start()},i.updateMask=function(e){i.canvas.tween.set(i.mask,{x:e.x,y:e.y,width:e.width,height:e.height}),i.canvas.tween.start()},i},tt=function e(t){d(this,e);var a=new Se(t),r=t.endframeNum||1,i=2==r?adData.endframe2_headline_text:adData.endframe_headline_text,n=2==r?adData.endframe2_subline_text:adData.endframe_subline_text,o=t.margin;function s(e,t){var a=t,r=a;if(e&&0==e.indexOf("<span")){var i=e.split("font-size:");i.length>1&&(e.indexOf("%")>-1&&e.indexOf("%")<e.indexOf(">")?(r=i[1].substring(0,i[1].indexOf("%")),r=a*(parseFloat(r)/100)):e.indexOf("px")>-1&&(r=parseFloat(i[1].substring(0,i[1].indexOf("px")))))}return r}function l(e){var t=e;if(0==t.indexOf("<span")){var a=e.split(";");(t=a[0]).indexOf("font-size")>-1&&(a[0]=t.substring(0,t.indexOf("font-size"))),t=a.join(";")}return t}return a.headline=new Oe({id:t.id+"_headline",target:a,css:{width:a.width,height:n?a.height/2-t.subline.offsetY:a.height/1.5,color:adData.text_color,zIndex:999},fontSize:s(i,t.header.fontSize),spacing:.1,bufferText:{left:o,right:o},fontFamily:adData.fonts.primary,format:be,alignText:t.header.alignText||J,align:t.header.align||{y:{type:t.header.type,offset:t.header.offsetY},snap:!0},text:l(i)}),a.lockupChildren=i?[a.headline]:[],n&&(a.subline=new Oe({id:t.id+"_subline",target:a,css:{width:a.width,height:i?a.height/2-t.subline.offsetY:a.height/1.5,color:adData.text_color,zIndex:999},fontSize:s(n,t.subline.fontSize),leading:t.subline.leading||1.2,spacing:.1,bufferText:{left:o,right:o},fontFamily:adData.fonts.secondary,format:be,alignText:t.subline.alignText,align:{x:t.subline.offsetX?{type:Z,offset:t.subline.offsetX}:t.subline.align?t.subline.align.x:{type:J,against:a.headline},y:{type:$,against:a.headline,outer:!0,offset:t.subline.offsetY},snap:!0},text:l(n)}),a.lockupChildren.push(a.subline)),a.text_lockup=new Pe({id:"offerLockup",target:a,children:a.lockupChildren.slice(),align:{x:J,y:J,snap:!0}}),a.animateIN=function(e){for(var t=e+1,r=0;r<a.lockupChildren.length;r++)TweenLite.from(a.lockupChildren[r],1,{delay:t,opacity:0}),t+=.25},a},at=function e(t){d(this,e);var a=new Se(t),r=t.id,i=t.css||{},n=t.margin||8,o=t.stackedOfferLineWidth||45,s=t.stacked,l=!adData.endframe_headline_text&&!adData.endframe_subline_text,f=s?i.width-2*n:(l?i.width:i.width/2)-2*n,c=s?i.height/2:i.height,h=t.smallTextPercentSize||34,u=t.smallTextOfferSize||50,g=adData.endframe_offer_value.indexOf("%")>-1?h:u,m='<span style="vertical-align: text-top; font-size: '+g+'%;">',p=adData.endframe_offer_value.replace("%","").replace("$","");function _(e,t){var a=t,r=a;if(e&&0==e.indexOf("<span")){var i=e.split("font-size:");i.length>1&&(e.indexOf("%")>-1&&e.indexOf("%")<e.indexOf(">")?(r=i[1].substring(0,i[1].indexOf("%")),r=a*(parseFloat(r)/100)):e.indexOf("px")>-1&&(r=parseFloat(i[1].substring(0,i[1].indexOf("px")))))}return r}function v(e){var t=e;if(0==t.indexOf("<span")){var a=e.split(";");(t=a[0]).indexOf("font-size")>-1&&(a[0]=t.substring(0,t.indexOf("font-size"))),t=a.join(";")}return t}var y={price:_(adData.endframe_offer_value,t.priceFontSize||62),priceSides:t.priceSidesFontSize||20,headline:_(adData.endframe_headline_text,t.headlineFontSize||20),subline:_(adData.endframe_subline_text,t.sublineFontSize||20)},w=v(adData.endframe_offer_value);p=p.indexOf(".")>-1?p.indexOf("."):p.length,w.indexOf("%")>-1&&(w=(w=w.split("%")).join(m+"%</span>")),w.indexOf("$")>-1&&(w=(w=w.split("$")).join(m+"$</span>")),w.indexOf(".")>-1&&(w=(w=w.split(".")).join(m),w+="</span>");var x=[];a.price=new Oe({id:r+"price",target:a,css:{width:f,height:c,color:adData.text_color},fontSize:y.price,spacing:.1,leading:.85,fontFamily:adData.fonts.primary,format:"inlineFitClamp",alignText:"alignTopLeft",text:w}),x.push(a.price);var D=(w=v(adData.endframe_offer_value)).replace("$","").replace("%","");D.indexOf(".")>-1&&(D=D.substring(0,D.indexOf("."))),a.price.text=D,K(a.price,U);var k=a.price.fontSize*(g/100);adData.endframe_offer_value.indexOf(".")>-1&&(a.priceCents=new Oe({id:r+"priceCents",target:a,css:{width:f,height:c,color:adData.text_color},fontSize:k,spacing:.1,fontFamily:adData.fonts.primary,format:xe,alignText:"alignTopLeft",align:{x:{type:Q,against:a.price,outer:!0}},text:adData.endframe_offer_value.substring(adData.endframe_offer_value.indexOf(".")+1,adData.endframe_offer_value.length)}),x.push(a.priceCents)),adData.endframe_offer_value.indexOf("%")>-1&&(a.pricePercent=new Oe({id:r+"pricePercent",target:a,css:{width:f,height:c,color:adData.text_color},fontSize:k,spacing:.1,fontFamily:adData.fonts.primary,format:xe,alignText:"alignTopLeft",align:{x:{type:Q,against:a.price,outer:!0}},text:"%"}),x.push(a.pricePercent)),a.priceTail=a.priceCents||a.pricePercent||null,adData.endframe_offer_value.indexOf("$")>-1&&(a.priceCurrency=new Oe({id:r+"priceCurrency",target:a,css:{width:f,height:c,color:adData.text_color},fontSize:k,spacing:.1,fontFamily:adData.fonts.primary,format:xe,alignText:"alignTopLeft",align:{x:{type:Z,against:a.price,outer:!0}},text:"$"}),x.push(a.priceCurrency));var S={width:p>2?a.price.width:a.priceCents?a.priceCents.width+15:o||a.price.width/2,color:adData.text_color},T={left:1,right:3,top:3};if(p<3&&a.priceCents&&(S.height=a.price.height*(g/100)),y.subline>a.price.fontSize/12?y.priceSides=y.subline:y.priceSides=a.price.fontSize/12,adData.endframe_offer_text_left&&(a.offerPriceLeft=new Oe({id:r+"offerPriceLeft",target:a,css:{width:Math.round(a.price.width/2),height:a.price.height,color:adData.text_color},fontSize:y.priceSides,fontFamily:adData.fonts.secondary,format:be,alignText:Z,bufferText:T,align:{x:{type:Z,outer:!0,against:a.priceCurrency||a.price},y:{type:ee,against:a.price},snap:!0},text:adData.endframe_offer_text_left}),x.push(a.offerPriceLeft)),adData.endframe_offer_text_right){var C=a.priceTail&&!adParams.isMobile?a.price.height-a.priceTail.height:a.price.height,A=adParams.isMobile&&a.priceTail?b({left:3},T,!0):T;a.offerPriceRight=new Oe({id:r+"offerPriceRight",target:a,css:{width:Math.round(a.price.width/2),height:C,color:adData.text_color},fontSize:y.priceSides,fontFamily:adData.fonts.secondary,format:be,alignText:Z,bufferText:A,align:{x:{type:Q,outer:!0,against:adParams.isMobile&&a.priceTail?a.priceTail:a.price},y:a.priceTail&&!adParams.isMobile?{type:$,against:a.price,offset:-3}:{type:ee,against:a.price},snap:!0},text:adData.endframe_offer_text_right}),x.push(a.offerPriceRight)}var P=new Pe({id:r+"_horizontalLockup",target:a,children:x});x=[P],adData.endframe_offer_text_top&&(a.offerPriceTop=new Oe({id:r+"offerPriceTop",target:a,css:{width:f,height:Math.floor(a.price.height/2),color:adData.text_color},fontSize:y.priceSides,fontFamily:adData.fonts.secondary,format:be,alignText:J,bufferText:T,align:{x:{type:J,against:P},y:{type:ee,outer:!0,against:P},snap:!0},text:adData.endframe_offer_text_top}),x.push(a.offerPriceTop)),adData.endframe_offer_text_bottom&&(a.offerPriceBottom=new Oe({id:r+"offerPriceBottom",target:a,css:{width:f,height:Math.floor(a.price.height/2),color:adData.text_color},fontSize:y.priceSides,fontFamily:adData.fonts.secondary,format:be,alignText:J,bufferText:b({top:0},T,!0),align:{x:{type:J,against:P},y:{type:$,outer:!0,against:P},snap:!0},text:adData.endframe_offer_text_bottom}),x.push(a.offerPriceBottom)),a.priceLockup=new Pe({target:a,id:"priceGroup",children:x});var O=[];adData.endframe_headline_text&&(a.headline=new Oe({id:r+"headline",target:a,css:{width:f,height:adData.endframe_subline_text?(c-2*n)/2:c/1.5,color:adData.text_color},fontSize:y.headline,spacing:.1,fontFamily:adData.fonts.secondary,format:be,alignText:J,text:v(adData.endframe_headline_text)}),O.push(a.headline)),adData.endframe_subline_text&&(a.subline=new Oe({id:r+"subline",target:a,css:{width:f,height:adData.endframe_headline_text?(c-2*n)/2:c/1.5,color:adData.text_color},fontSize:y.subline,leading:1.2,spacing:.1,fontFamily:adData.fonts.secondary,format:be,alignText:J,align:a.headline?{x:{type:J,against:a.headline},y:{type:$,against:a.headline,offset:3,outer:!0},snap:!0}:{},text:v(adData.endframe_subline_text)}),O.push(a.subline));var F=new Pe({id:r+"detailsContaienr",target:a,children:O.slice()}),E=1,L=a.priceLockup.height;a.priceLockup.width>f&&(E=f/a.priceLockup.width,TweenLite.set(a.priceLockup,{scale:E}),L=a.priceLockup.height*E),L>c&&(E*=c/L,TweenLite.set(a.priceLockup,{scale:E}));var z=[a.priceLockup];if(O.length)if(z.push(F),adData.use_endframe_separator_line&&(a.separatore=new Se({id:"endframeSeparator",target:a,css:{width:s?f:1,height:s?1:a.height,backgroundColor:"#ffffff",opacity:.3},align:{x:J,y:J,snap:!0}}),z.push(a.separatore)),s){ae(a.priceLockup,{x:J,snap:!0}),ae(F,{x:J,snap:!0});var M=(n=a.separatore?(a.height-a.priceLockup.height*E-F.height-a.separatore.height)/4:n)-a.priceLockup.height*(1-E)/2;adData.endframe_offer_flip?(a.separatore&&ae(a.separatore,{y:{type:$,against:F,outer:!0,offset:n}}),ae(a.priceLockup,{y:{type:$,against:a.separatore||F,outer:!0,offset:M}})):(a.separatore&&ae(a.separatore,{y:{type:$,against:a.priceLockup,outer:!0,offset:M}}),ae(F,{y:{type:$,against:a.separatore||a.priceLockup,outer:!0,offset:a.separatore?n:M}}))}else ae(a.priceLockup,{y:J,snap:!0}),ae(F,{y:J,snap:!0}),M=(n=a.separatore?Math.round((a.width-a.priceLockup.width*E-F.width-a.separatore.width)/4):n)-a.priceLockup.width*(1-E)/2,adData.endframe_offer_flip?(a.separatore&&ae(a.separatore,{x:{type:Q,against:F,outer:!0,offset:n}}),ae(a.priceLockup,{x:{type:Q,against:a.separatore||F,outer:!0,offset:M}})):(a.separatore&&ae(a.separatore,{x:{type:Q,against:a.priceLockup,outer:!0,offset:M}}),ae(F,{x:{type:Q,against:a.separatore||a.priceLockup,outer:!0,offset:a.separatore?n:M}}));return a.offerContent=new Pe({id:r+"_offerContent",target:a,children:z,align:{x:{type:J,offset:s||O.length<1?0:adData.endframe_offer_flip?a.priceLockup.width*(1-E)/4:-a.priceLockup.width*(1-E)/4},y:{type:J,offset:O.length<1?0:s?adData.endframe_offer_flip?a.priceLockup.height*(1-E)/4:-a.priceLockup.height*(1-E)/4:0},snap:!0}}),a.animateIN=function(e){var t=e;TweenLite.from(a.priceLockup,1,{opacity:0,delay:t}),t+=.25,TweenLite.from(a,1,{backgroundColor:"rgba(0,0,0,0)",delay:t}),a.headline&&TweenLite.from(a.headline,1,{opacity:0,delay:t}),a.separatore&&TweenLite.from(a.separatore,1,{opacity:0,delay:t}),t+=.25,adData.endframe_subline_text&&TweenLite.from(a.subline,1,{opacity:0,delay:t})},a};function rt(){var e=j("main");N(e,{position:"absolute",width:adParams.adWidth,height:adParams.adHeight,opacity:0,left:"0px",top:"0px",overflow:"hidden",userSelect:"none"});var t=adParams.adHeight-140,a="full"==adData.endframe_frost_level?t:"half"==adData.endframe_frost_level?Math.round(t/2):"third"==adData.endframe_frost_level?Math.round(t/3):0,r=0!=a,i={xStart:0,yStart:Math.ceil((adParams.adHeight-140)/1.5),xEnd:0,yEnd:adParams.adHeight-140,colors:[{stopVal:0,color:"rgba(0, 0, 0, 0)"},{stopVal:1,color:"rgba(150, 150, 150, 1)"}]};return e.intro=new function(){var a,r,n,o,s,l,d="intro_",f=new Se({id:d+"container",target:e,css:{width:adParams.adWidth,height:adParams.adHeight}});f.imagesArray=[],f.textsArray=[],f.leading=1.2,adData.skip_first_frame="full"!=adData.image_frost_levels[0];for(var c=0;c<adData.imagesArray.length;c++)l=0!=(s="full"==adData.image_frost_levels[c]?t:"half"==adData.image_frost_levels[c]?Math.round(t/2):"third"==adData.image_frost_levels[c]?Math.round(t/3):0),o=new et({id:d+"maskedCanvasImage_0"+(c+1),target:f,css:{width:adParams.adWidth,height:adParams.adHeight,opacity:0==c?1:0},image:{source:adData.imagesArray[c],params:{width:adParams.adWidth,height:adParams.adHeight}},mask:{params:{width:adParams.adWidth,height:adParams.adHeight}},gradientData:b({opacity:adData.image_frost_darkness[c]},i),blur:!1,noise:!1}),l&&(o.frostImageCover=new et({id:d+"frostImageCover_0"+(c+1),target:o,css:{width:adParams.adWidth,height:adParams.adHeight,opacity:0==c?adData.skip_first_frame?0:1:0},image:{source:adData.imagesArray[c],params:{width:adParams.adWidth,height:adParams.adHeight}},mask:{params:{width:adParams.adWidth,height:s,y:t-s}},gradientData:i,blur:!0,noise:!0,gradient:!1,lowerBlur:!1,darknessAmount:adData.image_frost_darkness[c]})),f.imagesArray.push(o),a="full"==(n=adData.image_frost_levels[c])?40:30,r="full"==n?J:Z,l=(s="full"==n?t:"half"==n?Math.round(t/2):"third"==n?Math.round(t/3):3*a)!=3*a,f.textsArray[c]=new Oe({id:"frame_0"+c+"_text",target:o,css:{width:adParams.adWidth,height:s,color:adData.text_color,opacity:0},fontSize:a,spacing:.1,leading:f.leading,bufferText:{left:5,right:5},fontFamily:adData.fonts.primary,format:be,alignText:r,text:adData.textsArray[c]}),ae(f.textsArray[c],l?"full"==n?{x:{type:J},y:{type:J,against:t/2},snap:!0}:{x:{type:Z},y:{type:J,against:t-s/2},snap:!0}:{x:{type:Z},y:{type:$,offset:-154},snap:!0});return f},e.exitBTN=new Ce({id:"exitBTN",target:e,css:{width:"100%",height:"100%"},onClick:function(){Control.networkExit()}}),e.endframe=new function(){var n="endframe_",o=new Se({id:n+"container",target:e,css:{width:adParams.adWidth,height:adParams.adHeight}});if(o.image=new et({id:n+"image",target:o,css:{width:adParams.adWidth,height:adParams.adHeight,opacity:0},image:{source:adData.endframe_img,params:{width:adParams.adWidth,height:adParams.adHeight}},mask:{params:{width:adParams.adWidth,height:adParams.adHeight}},gradientData:i,blur:!1,noise:!1,gradient:!1,lowerBlur:!1}),o.frostImage=new et({id:n+"frostImage",target:o.image,css:{width:adParams.adWidth,height:adParams.adHeight,opacity:0},image:{source:adData.endframe_img,params:{width:adParams.adWidth,height:adParams.adHeight}},mask:{params:{x:0,y:230,width:adParams.adWidth,height:230}},gradientData:i,blur:r,noise:r,gradient:!1,lowerBlur:!1,darknessAmount:adData.endframe_frost_darkness}),adData.endframe_text_img&&(o.text_image=new Te({id:n+"_text_image",target:o,retina:!0,source:adData.endframe_text_img})),adData.endframe_offer_value){var s=a||t;o.module=new at({id:n+"_offer",target:o,css:{width:adParams.adWidth,height:s,y:t-s},align:{y:{type:$,offset:-140}},stacked:"auto"==adData.endframe_offer_orientation||"vertical"==adData.endframe_offer_orientation,priceFontSize:83,headlineFontSize:28,sublineFontSize:18,margin:6})}else"half"==adData.endframe_frost_level||"third"==adData.endframe_frost_level?o.module=new tt({id:n+"_nonOffer",target:o,css:{width:adParams.adWidth,height:a,y:t-a},align:{y:{type:$,offset:-140}},margin:6,header:{fontSize:28},subline:{fontSize:18,alignText:J,offsetY:9}}):"full"==adData.endframe_frost_level?o.module=new tt({id:n+"_nonOffer",target:o,css:{width:adParams.adWidth,height:a,y:t-a},margin:5,header:{fontSize:28,alignText:J},subline:{fontSize:18,offsetY:9,alignText:J}}):o.module=new tt({id:n+"_nonOffer",target:o,css:{width:adParams.adWidth,height:t,y:0},align:{y:{type:$,offset:-140}},margin:5,header:{fontSize:28,alignText:J},subline:{fontSize:18,offsetY:9,alignText:J}});var l={height:o.module.height,width:o.module.width,y:o.module.y};return o.frostImage.updateMask(l),o.hide(),o},ue.disable(e.endframe),e.footer=new function(){var t,a="footer_",r=new Se({id:a+"container",target:e,css:{width:adParams.adWidth,height:140,backgroundColor:adData.footer_color},align:$});return t={height:30,width:140,backgroundPosition:"center"},r.logo=new Te({id:a+"logo",target:r,aspectRatio:!0,source:adData.logo,css:t,align:{x:{type:J},y:{type:ee,offset:75},snap:!0}}),r.legal=new Oe({id:a+"legal",target:r,css:{width:100,height:24,color:adData.legal_text_color},fontSize:10,spacing:.2,fontFamily:adData.fonts.secondary,format:xe,alignText:J,text:adData.legal_text,align:{x:{type:Q,offset:-4},y:{type:$,offset:-4},snap:!0}}),r.ctaWidth=120,r.ctaHeight=30,r.cta=new Ce({id:a+"cta",target:r,css:{width:r.ctaWidth,height:r.ctaHeight,backgroundColor:adData.cta_button_out_color,borderRadius:34,overflow:"hidden"},bg:new Se({css:{x:0,width:r.ctaWidth,height:r.ctaHeight,opacity:0,background:"linear-gradient(to right,"+adData.cta_button_over_startColor+" 8%,"+adData.cta_button_over_endColor+" 200%)"}}),icon:[new Oe({css:{width:r.ctaWidth,height:r.ctaHeight,color:adData.text_color},fontSize:12,fontFamily:adData.fonts.primary,format:xe,alignText:J,text:adData.cta_text})],onOver:function(){TweenLite.to(r.cta.icon[0],.5,{color:adData.cta_text_over_color}),TweenLite.to(r.cta.bg,.5,{opacity:1}),TweenLite.to(r.cta,.5,{borderRadius:6})},onOut:function(){TweenLite.to(r.cta.icon[0],.5,{color:adData.cta_text_out_color}),TweenLite.to(r.cta.bg,.5,{opacity:0}),TweenLite.to(r.cta,.5,{borderRadius:34,backgroundColor:adData.cta_button_out_color})},onClick:function(){adData.hasModule?adData.elements.endframe.module.submit():Control.networkExit()}}),ae(r.cta.icon[0],J),ae(r.cta,{x:{type:J},y:{type:ee,offset:37},snap:!0}),r},ue.disable(e.footer),e.preloaderTransition=new Qe({id:"disneyPreloaderTransition",target:e,css:{width:adParams.adWidth,height:adParams.adHeight},ears:{css:{width:75,height:75},scaleOUT:22}}),e}function it(){new ke({target:View.main,size:1,color:adData.color.border})}window.Control=new function(){this.prepare=function(t){var a=this;Y(t).then(function(){return we.init()}).then(function(){return new Promise(function(t,a){X(t,e.failAd)})}).then(function(){a.prepareBuild()}).catch(function(e){throw e})},this.prepareBuild=function(){Control.preMarkup(),View.main=new rt,View.mainBorder=new it,Control.postMarkup(),Animation.startAd(),Animation.startScene()},this.preMarkup=function(){},this.postMarkup=function(){},this.animationComplete=function(){},this.networkExit=function(e){var t=e||clickTag;Network.exit(t)}},window.Animation=new function(){this.startAd=function(){TweenLite.to(j("preloader"),.25,{opacity:0,onComplete:e.removePreloader,delay:.1,ease:Power2.easeInOut}),N(View.main,{opacity:1})},this.startScene=function(){View.main.preloaderTransition.animateIN();var e=View.main.intro,t=(View.main.endframe,View.main.footer,.5);adData.skip_first_frame?TweenLite.fromTo(e.textsArray[0],1,{opacity:0,y:"+=100"},{opacity:1,y:e.textsArray[0].y,ease:Expo.easeOut,delay:t}):TweenLite.to(e.textsArray[0],1,{opacity:1,delay:t}),e.imagesArray[0].frostImageCover&&adData.skip_first_frame&&TweenLite.delayedCall(0,e.imagesArray[0].frostImageCover.play,[.01]),t=adData.time_per_frame-t,Animation.showNextFrames(1,t)},this.showNextFrames=function(e,t){var a=View.main.intro;if(t=t,e>=a.imagesArray.length)t+=.5,Animation.showEndframe(t);else for(var r=e;r<a.imagesArray.length;r++)i(r,r,t),t+=adData.time_per_frame,r==a.imagesArray.length-1&&Animation.showEndframe(t);function i(e,t,r){r=r,TweenLite.delayedCall(r,a.imagesArray[e].play),a.imagesArray[e].frostImageCover&&TweenLite.delayedCall(r,a.imagesArray[e].frostImageCover.play),null!=a.textsArray[t]&&(TweenLite.set(a.textsArray[t],{opacity:1}),TweenLite.from(a.textsArray[t],1,{opacity:0,y:"+=100",ease:Expo.easeOut,delay:r+1}))}},this.showEndframe=function(e){if(adData.useEndframe){var t=View.main.endframe;e=e,t.show(),TweenLite.delayedCall(e,function(){t.image.play(),(adData.endframe_headline_text||adData.endframe_subline_text||adData.endframe_offer_value||adData.endframe_text_img||adData.hasModule)&&t.frostImage.play()}),e+=1,adData.endframe_text_img?(t.module&&t.module.hide(),TweenLite.from(t.text_image,1,{opacity:0,delay:e})):t.module&&t.module.animateIN(e)}}}}).call(this,a(0))}]);